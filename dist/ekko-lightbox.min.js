!function(){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var c,t,e,s,i;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,c=jQuery,t="ekkoLightbox",e=c.fn[t],s={debug:0,title:"",footer:"",maxWidth:9999,maxHeight:9999,showArrows:!0,hideArrowsOnVideo:!1,wrapping:!0,type:null,alwaysShowClose:!1,fade:!0,verticalAlignCenter:!1,loadingMessage:'<div class="ekko-lightbox-loader"><div><div></div><div></div></div></div>',leftArrow:"<span>&#10094;</span>",rightArrow:"<span>&#10095;</span>",strings:{close:"Close",fail:"Failed to load image:",type:"Could not detect remote target type. Force the type using data-type"},doc:document,onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNavigate:function(){},onContentLoaded:function(){}},i=function(){function n(t,e){var i=this;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this._config=c.extend({},s,e),this._$modalNavLayer=null,this._$modalArrows=null,this._$debugInfo=null,this._galleryIndex=0,this._galleryName=null,this._titleIsShown=!1,this._footerIsShown=!1,this._wantedWidth=0,this._wantedHeight=0,this._touchstartX=0,this._touchendX=0,this._modalId="ekkoLightbox-".concat(Math.floor(1e3*Math.random()+1)),this._$element=t instanceof jQuery?t:c(t),this._isBootstrap3=3==c.fn.modal.Constructor.VERSION[0];var e='<h4 class="modal-title">'.concat(this._config.title||"&nbsp;","</h4>"),t='<button type="button" class="close" data-dismiss="modal" aria-label="'.concat(this._config.strings.close,'"><span aria-hidden="true">&times;</span></button>'),a=this._config.fade?"fade in":"",o=this._config.verticalAlignCenter?"modal-dialog-centered":"",e='<div class="modal-header'.concat(this._config.title||this._config.alwaysShowClose?"":" hide",'">')+(this._isBootstrap3?t+e:e+t)+"</div>",t='<div class="modal-footer'.concat(this._config.footer?"":" hide",'">').concat(this._config.footer||"&nbsp;","</div>"),a='<div class="modal-body"><div class="ekko-lightbox-container"><div class="ekko-lightbox-item '.concat(a,' show"></div><div class="ekko-lightbox-item fade"></div></div></div>'),o='<div class="modal-dialog '.concat(o,'" role="document"><div class="modal-content">').concat(e).concat(a).concat(t,"</div></div>");c(this._config.doc.body).append('<div id="'.concat(this._modalId,'" class="ekko-lightbox modal fade" tabindex="-1" tabindex="-1" role="dialog" aria-hidden="true">').concat(o,"</div>")),this._$modal=c("#".concat(this._modalId),this._config.doc),0<this._config.debug&&this._$modal.append('<div class="modal-debug-info"></div>'),this._$debugInfo=this._$modal.find(".modal-debug-info").first(),this._$modalDialog=this._$modal.find(".modal-dialog").first(),this._$modalContent=this._$modal.find(".modal-content").first(),this._$modalBody=this._$modal.find(".modal-body").first(),this._$modalHeader=this._$modal.find(".modal-header").first(),this._$modalFooter=this._$modal.find(".modal-footer").first(),this._$lightboxContainer=this._$modalBody.find(".ekko-lightbox-container").first(),this._$lightboxBodyOne=this._$lightboxContainer.find("> div:first-child").first(),this._$lightboxBodyTwo=this._$lightboxContainer.find("> div:last-child").first(),this._$lightboxContainerCurrent=this._$lightboxBodyOne,this._$lightboxContainerUnUsed=this._$lightboxBodyTwo,this._galleryName=this._$element.data("gallery"),this._galleryName&&(this._$galleryItems=c(document.body).find('*[data-gallery="'.concat(this._galleryName,'"]')),this._galleryIndex=this._$galleryItems.index(this._$element),c(document).on("keydown.ekkoLightbox",this._navigationalBinder.bind(this)),this._config.showArrows&&1<this._$galleryItems.length&&(this._$lightboxContainer.prepend('<div class="ekko-lightbox-nav-overlay"><a href="#"></a><a href="#"></a></div>'),this._$modalNavLayer=this._$lightboxContainer.find("div.ekko-lightbox-nav-overlay").first(),this._$lightboxContainer.append('<div class="ekko-lightbox-nav-arrows"><a href="#">'.concat(this._config.leftArrow,'</a><a href="#">').concat(this._config.rightArrow,"</a></div>")),this._$modalArrows=this._$lightboxContainer.find("div.ekko-lightbox-nav-arrows").first(),this._$lightboxContainer.on("click","a:first-child",function(t){return t.preventDefault(),i.navigateLeft()}),this._$lightboxContainer.on("click","a:last-child",function(t){return t.preventDefault(),i.navigateRight()}),this._$modalNavLayer.find("a:first-child").hover(function(){i._$modalArrows.find("a:first-child").addClass("hover")},function(){i._$modalArrows.find("a:first-child").removeClass("hover").filter('[class=""]').removeAttr("class")}),this._$modalNavLayer.find("a:last-child").hover(function(){i._$modalArrows.find("a:last-child").addClass("hover")},function(){i._$modalArrows.find("a:last-child").removeClass("hover").filter('[class=""]').removeAttr("class")}),this.updateNavigation())),this._$modal.on("show.bs.modal",this._config.onShow.bind(this)).on("shown.bs.modal",function(){return i._toggleLoading(!0),i._handle(),i._config.onShown.call(i)}).on("hide.bs.modal",this._config.onHide.bind(this)).on("hidden.bs.modal",function(){return i._galleryName&&(c(document).off("keydown.ekkoLightbox"),c(window).off("resize.ekkoLightbox")),i._$modal.remove(),i._config.onHidden.call(i)}).modal(this._config),c(window).on("resize.ekkoLightbox",function(){i._resize(i._wantedWidth,i._wantedHeight)}),this._$lightboxContainer.on("touchstart",function(){i._touchstartX=event.changedTouches[0].screenX}).on("touchend",function(){i._touchendX=event.changedTouches[0].screenX,i._swipeGesure()})}var t,e,i;return t=n,i=[{key:"Default",get:function(){return s}},{key:"_jQueryInterface",value:function(e){var i=this;return e=e||{},this.each(function(){var t=c(i),t=c.extend({},n.Default,t.data(),"object"===a(e)&&e);new n(i,t)})}}],(e=[{key:"element",value:function(){return this._$element}},{key:"modal",value:function(){return this._$modal}},{key:"navigateTo",value:function(t){if(t<0||t>this._$galleryItems.length-1)return this;this._galleryIndex=t,this.updateNavigation(),this._$element=c(this._$galleryItems.get(this._galleryIndex)),this._handle()}},{key:"navigateLeft",value:function(){if(this._$galleryItems&&1!==this._$galleryItems.length){if(0===this._galleryIndex){if(!this._config.wrapping)return;this._galleryIndex=this._$galleryItems.length-1}else this._galleryIndex--;return this._config.onNavigate.call(this,"left",this._galleryIndex),this.navigateTo(this._galleryIndex)}}},{key:"navigateRight",value:function(){if(this._$galleryItems&&1!==this._$galleryItems.length){if(this._galleryIndex===this._$galleryItems.length-1){if(!this._config.wrapping)return;this._galleryIndex=0}else this._galleryIndex++;return this._config.onNavigate.call(this,"right",this._galleryIndex),this.navigateTo(this._galleryIndex)}}},{key:"updateNavigation",value:function(){var t;this._config.wrapping||(t=this._$lightboxContainer.find("div.ekko-lightbox-nav-overlay"),0===this._galleryIndex?t.find("a:first-child").addClass("disabled"):t.find("a:first-child").removeClass("disabled"),this._galleryIndex===this._$galleryItems.length-1?t.find("a:last-child").addClass("disabled"):t.find("a:last-child").removeClass("disabled"))}},{key:"close",value:function(){return this._$modal.modal("hide")}},{key:"_navigationalBinder",value:function(t){return 39===(t=t||window.event).keyCode?this.navigateRight():37===t.keyCode?this.navigateLeft():void 0}},{key:"_detectRemoteType",value:function(t,e){return e=!(e="audio"==(e=!(e=!(e=!(e=!(e=e||!1)&&this._isImage(t)?"image":e)&&this._getYoutubeId(t)?"youtube":e)&&this._getVimeoId(t)?"vimeo":e)&&this._getInstagramId(t)?"instagram":e)||"video"==e||!e&&this._isMedia(t)?"media":e)||["image","youtube","vimeo","instagram","media","url"].indexOf(e)<0?"url":e}},{key:"_getRemoteContentType",value:function(t){return c.ajax({type:"HEAD",url:t,async:!1}).getResponseHeader("Content-Type")}},{key:"_isImage",value:function(t){return t&&t.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)}},{key:"_isMedia",value:function(t){return t&&t.match(/(\.(mp3|mp4|ogg|webm|wav)((\?|#).*)?$)/i)}},{key:"_switchContainers",value:function(){var t=this._$lightboxContainerUnUsed;this._$lightboxContainerUnUsed=this._$lightboxContainerCurrent,this._$lightboxContainerCurrent=t,this._$lightboxContainerCurrent.css("z-index",this._$lightboxContainerUnUsed.css("z-index")+1),this._$lightboxContainerUnUsed.css("z-index","auto"),this._$lightboxContainerCurrent.css("z-index",1),this._$lightboxContainerUnUsed.removeClass("in show"),this._$lightboxContainerCurrent.addClass("in show")}},{key:"_handle",value:function(){this._$modalDialog.removeClass("imageLoading"),this._$modalDialog.removeClass("imageLoaded"),this._$modalDialog.removeClass("imageStretched"),this._$modalDialog.removeClass("isVideo");var t=this._$lightboxContainerUnUsed,e=(this._$modalHeader.css("opacity",0),this._$modalFooter.css("opacity",0),this._updateTitleAndFooter(),this._switchContainers(),this._$element.attr("data-remote")||this._$element.attr("href")),i=this._detectRemoteType(e,this._$element.attr("data-type")||!1);if(["image","youtube","vimeo","instagram","media","url"].indexOf(i)<0)return this._error(this._config.strings.type);switch(i){case"image":var a=this._$element.attr("data-alt")||"";this._preloadImage(e,a,t),this._preloadImageByIndex(this._galleryIndex,3);break;case"youtube":this._showYoutubeVideo(e,t);break;case"vimeo":this._showVimeoVideo(this._getVimeoId(e),t);break;case"instagram":this._showInstagramVideo(this._getInstagramId(e),t);break;case"media":this._showHtml5Media(e,t);break;default:this._loadRemoteContent(e,t)}var o=this;return setTimeout(function(){o._$modalHeader.css("opacity",1),o._$modalFooter.css("opacity",1),o._$lightboxContainerUnUsed.empty()},250),this}},{key:"_getYoutubeId",value:function(t){if(!t)return!1;t=t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return!(!t||11!==t[2].length)&&t[2]}},{key:"_getVimeoId",value:function(t){return!!(t&&0<t.indexOf("vimeo"))&&t}},{key:"_getInstagramId",value:function(t){return!!(t&&0<t.indexOf("instagram"))&&t}},{key:"_toggleLoading",value:function(t){return(t=t||!1)?(this._$modalDialog.css("display","none"),this._$modal.removeClass("in show"),c(".modal-backdrop").append(this._config.loadingMessage)):(this._$modalDialog.css("display",this._config.verticalAlignCenter?"flex":"block"),this._$modal.addClass("in show"),c(".modal-backdrop").find(".ekko-lightbox-loader").remove()),this}},{key:"_calculateScaleFactor",value:function(t,e){var i=window.screen.width,a=window.screen.height,t=Math.max(t,e);return Math.max(i,a)/t}},{key:"_updateTitleAndFooter",value:function(){var t=this._$element.data("title")||"",e=this._$element.data("footer")||"";return this._titleIsShown=!1,t||this._config.alwaysShowClose?(this._titleIsShown=!0,this._$modalHeader.css("display","").find(".modal-title").html(t||"&nbsp;"),this._$modalDialog.addClass("headerIsShown")):(this._$modalHeader.css("display","none"),this._$modalDialog.removeClass("headerIsShown")),this._footerIsShown=!1,e?(this._footerIsShown=!0,this._$modalFooter.css("display","").html(e),this._$modalDialog.addClass("FooterIsShown")):(this._$modalFooter.css("display","none"),this._$modalDialog.removeClass("FooterIsShown")),this}},{key:"_showYoutubeVideo",value:function(t,e){var i=this._getYoutubeId(t),t=0<t.indexOf("&")?t.substr(t.indexOf("&")):"",a=this._$element.data("width")||560,o=this._$element.data("height")||a/(560/315);return this._showVideoIframe("//www.youtube.com/embed/".concat(i,"?badge=0&autoplay=1&html5=1").concat(t),a,o,e)}},{key:"_showVimeoVideo",value:function(t,e){var i=this._$element.data("width")||500,a=this._$element.data("height")||i/(560/315);return this._showVideoIframe(t+"?autoplay=1",i,a,e)}},{key:"_showInstagramVideo",value:function(t,e){var i=this._$element.data("width")||612,a=i+80;return t="/"!==t.substr(-1)?t+"/":t,e.html('<iframe width="'.concat(i,'" height="').concat(a,'" src="').concat(t,'embed/" frameborder="0" allowfullscreen></iframe>')),this._replaceMarkup(),this._resize(i,a),this._config.onContentLoaded.call(this),this._$modalNavLayer&&this._$modalNavLayer.css("display",this._config.hideArrowsOnVideo?"none":""),this._$modalDialog.addClass("isVideo"),this._toggleLoading(!1),this}},{key:"_showVideoIframe",value:function(t,e,i,a){var o=this._calculateScaleFactor(e,i=i||e);return i*=o,a.html('<div class="embed-responsive embed-responsive-16by9"><iframe width="'.concat(e*=o,'" height="').concat(i,'" src="').concat(t,'" frameborder="0" allowfullscreen class="embed-responsive-item"></iframe></div>')),this._replaceMarkup(),this._resize(e,i),this._config.onContentLoaded.call(this),this._$modalNavLayer&&this._$modalNavLayer.css("display",this._config.hideArrowsOnVideo?"none":""),this._$modalDialog.addClass("isVideo"),this._toggleLoading(!1),this}},{key:"_showHtml5Media",value:function(t,e){var i=this._getRemoteContentType(t);if(!i)return this._error(this._config.strings.type);var a="",a=0<i.indexOf("audio")?"audio":"video",o=this._$element.data("width")||560,n=this._$element.data("height")||o/(560/315),s=this._calculateScaleFactor(o,n);return o*=s,n*=s,e.html('<div class="embed-responsive embed-responsive-16by9"><'.concat(a,' width="').concat(o,'" height="').concat(n,'" preload="auto" autoplay controls class="embed-responsive-item"><source src="').concat(t,'" type="').concat(i,'">').concat(this._config.strings.type,"</").concat(a,"></div>")),this._replaceMarkup(),this._resize(o,n),this._config.onContentLoaded.call(this),this._$modalNavLayer&&this._$modalNavLayer.css("display",this._config.hideArrowsOnVideo?"none":""),this._$modalDialog.addClass("isVideo"),this._toggleLoading(!1),this}},{key:"_loadRemoteContent",value:function(t,e){var i=this,a=this._$element.data("width")||560,o=this._$element.data("height")||560,n=this._$element.data("disableExternalCheck")||!1,s=(this._toggleLoading(!1),this._calculateScaleFactor(a,o));return a*=s,o*=s,n||this._isExternal(t)?(e.html('<iframe src="'.concat(t,'" frameborder="0" allowfullscreen></iframe>')),this._config.onContentLoaded.call(this)):e.load(t,c.proxy(function(){return i._$element.trigger("loaded.bs.modal")})),this._$modalNavLayer&&this._$modalNavLayer.css("display",this._config.hideArrowsOnVideo?"none":""),this._$modalDialog.addClass("isVideo"),this._replaceMarkup(),this._resize(a,o),this}},{key:"_isExternal",value:function(t){t=t.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof t[1]&&0<t[1].length&&t[1].toLowerCase()!==location.protocol||"string"==typeof t[2]&&0<t[2].length&&t[2].replace(new RegExp(":(".concat({"http:":80,"https:":443}[location.protocol],")?$")),"")!==location.host}},{key:"_error",value:function(t){return console.error(t),this._$lightboxContainerCurrent.html(t),this._resize(300,300),this}},{key:"_preloadImageByIndex",value:function(t,e){if(this._$galleryItems){var i,a=c(this._$galleryItems.get(t),!1);if(void 0!==a)return i=a.attr("data-remote")||a.attr("href"),"image"!==a.attr("data-type")&&!this._isImage(i)||this._preloadImage(i,"",!1),0<e?this._preloadImageByIndex(t+1,e-1):void 0}}},{key:"_preloadImage",value:function(t,s,l){var d=this,r=(l=l||!1,new Image),h=null;return l&&(h=setTimeout(function(){l.append(d._config.loadingMessage)},200)),r.onload=function(){var t,e,i,a,o,n;if(l)return h&&clearTimeout(h),h=null,(e=c("<img />")).attr("src",r.src),e.attr("alt",s),e.addClass("img-fluid"),e.css("width","100% !important"),d._$element[0].hasAttribute("data-markup")?(t=d._$element.attr("data-markup"),l.html(t)):l.html(e),d._$modalNavLayer&&d._$modalNavLayer.css("display",""),d._$modalDialog.css("display",d._config.verticalAlignCenter?"flex":"block"),d._$modalDialog.addClass("imageLoading"),e=t=0,i=l.find("img")[0].width,a=l.find("img")[0].height,o=r.width,n=r.height,0<i&&0<a?(t=i,e=a):0<o&&0<n&&(t=o,e=n),d._$modalDialog.removeClass("imageLoading"),0<t&&0<e?(1<d._config.debug&&alert("imageWidth: "+i+", \\nimageHeight: "+a+", \\nimgWidth: "+o+", \\nimgHeight: "+n+"."),d._resize(t,e)):(d._$modalDialog.addClass("imageStretched"),1<d._config.debug&&alert("imageStretched"),window.console&&console.log("ekko lightbox: using 'imageStretched' mode for "+r.src)),d._$modalDialog.addClass("imageLoaded"),d._toggleLoading(!1),d._config.onContentLoaded.call(d)},l&&(r.onerror=function(){return d._toggleLoading(!1),d._error(d._config.strings.fail+"  ".concat(t))}),r.src=t,r}},{key:"_swipeGesure",value:function(){return this._touchendX<this._touchstartX?this.navigateRight():this._touchendX>this._touchstartX?this.navigateLeft():void 0}},{key:"_resize",value:function(t,e){var i=this._calculateScaleFactor(t,e=e||t),i=(e*=i,this._wantedWidth=t*=i,this._wantedHeight=e,1<this._config.debug&&alert("wanted width: "+this._wantedWidth+", wanted height: "+this._wantedHeight),t/e),a=(this._$modalDialog.addClass("imageLoading"),this._$modalDialog.outerWidth(!1)),o=this._$lightboxContainer.innerWidth(),n=this._$modalDialog.outerHeight(!1),s=this._$modalDialog.outerHeight(!0),l=this._$lightboxContainer.innerHeight(),o=(this._$modalDialog.removeClass("imageLoading"),a-o),n=n-l,s=s-l,l=Math.min(a,this._config.doc.body.clientWidth,this._config.maxWidth),a=(l<t+o?(e=(l-o)/i,t=l):t+=o,0),l=0,s=(this._footerIsShown&&(l=this._$modalFooter.outerHeight(!0)||55),this._titleIsShown&&(a=this._$modalHeader.outerHeight(!0)||67),Math.min(e,window.innerHeight-s-a-l,this._config.maxHeight-n-a-l)),a=(s<e&&(t=Math.ceil(s*i)+o),this._$lightboxContainer.css("height",s),this._$modalDialog.css("flex","1").css("maxWidth",t),0<this._config.debug&&this._$debugInfo&&(n="window width: "+c(window).width()+",\nwindow height: "+c(window).height()+",\nwindow screen width: "+window.screen.width+",\nwindow screen height: "+window.screen.height+",\nwindow inner width: "+window.innerWidth+",\nwindow inner height: "+window.innerHeight+",\n maxheight: "+s,this._$debugInfo.text(n)),this._$modal.data("bs.modal"));if(a)try{a._handleUpdate()}catch(t){a.handleUpdate()}return this}}])&&o(t.prototype,e),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),n}(),c.fn[t]=i._jQueryInterface,c.fn[t].Constructor=i,c.fn[t].noConflict=function(){return c.fn[t]=e,i._jQueryInterface},exports.default=i}(jQuery);
//# sourceMappingURL=ekko-lightbox.min.js.map