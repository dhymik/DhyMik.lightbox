{"version":3,"sources":["../ekko-lightbox.js"],"names":["Lightbox","$","NAME","JQUERY_NO_CONFLICT","fn","Default","debug","title","footer","maxWidth","maxHeight","showArrows","hideArrowsOnVideo","wrapping","type","alwaysShowClose","fade","verticalAlignCenter","loadingMessage","leftArrow","rightArrow","strings","close","fail","doc","document","onShow","onShown","onHide","onHidden","onNavigate","onContentLoaded","$element","config","_config","extend","_$modalNavLayer","_$modalArrows","_$debugInfo","_galleryIndex","_galleryName","_titleIsShown","_footerIsShown","_wantedWidth","_wantedHeight","_touchstartX","_touchendX","_modalId","Math","floor","random","_$element","jQuery","_isBootstrap3","modal","Constructor","VERSION","h4","btn","vertical","header","body","dialog","append","_$modal","find","first","_$modalDialog","_$modalContent","_$modalBody","_$modalHeader","_$modalFooter","_$lightboxContainer","_$lightboxBodyOne","_$lightboxBodyTwo","_$lightboxContainerCurrent","_$lightboxContainerUnUsed","data","_$galleryItems","index","on","_navigationalBinder","bind","length","prepend","event","preventDefault","navigateLeft","navigateRight","hover","addClass","removeClass","filter","removeAttr","updateNavigation","_toggleLoading","_handle","call","off","window","remove","_resize","changedTouches","screenX","_swipeGesure","get","navigateTo","$nav","keyCode","src","_isImage","_getYoutubeId","_getVimeoId","_getInstagramId","_isMedia","indexOf","response","ajax","url","async","contentType","getResponseHeader","string","match","$newCurrent","css","$toUse","_updateTitleAndFooter","_switchContainers","currentRemote","attr","currentType","_detectRemoteType","_error","altTag","_preloadImage","_preloadImageByIndex","_showYoutubeVideo","_showVimeoVideo","_showInstagramVideo","_showHtml5Media","_loadRemoteContent","thisLightbox","setTimeout","empty","matches","show","width","height","screenWidth","screen","screenHeight","videoMaxDimension","max","screenMaxDimension","caption","html","remote","$containerForElement","id","query","substr","_showVideoIframe","scalingFactor","_calculateScaleFactor","_getRemoteContentType","mediaType","disableExternalCheck","_isExternal","load","proxy","trigger","toLowerCase","location","protocol","replace","RegExp","host","message","console","error","startIndex","numberOfTimes","next","$containerForImage","img","Image","loadingTimeout","onload","clearTimeout","image","hasAttribute","markup","clientWidth","clientHeight","imageWidth","imageHeight","imgWidth","imgHeight","alert","log","onerror","imageAspecRatio","modalDialogOuterWidthExcludingMargins","outerWidth","modalImageContainerInnerWidth","innerWidth","modalDialogOuterHeightExcludingMargins","outerHeight","modalDialogOuterHeightIncludingMargins","modalImageContainerInnerHeight","innerHeight","widthInnerSpacing","heightInnerSpacing","heightOuterSpacing","min","headerHeight","footerHeight","ceil","text","_handleUpdate","Exception","handleUpdate","each","$this","_jQueryInterface","noConflict"],"mappings":"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","sourcesContent":["const Lightbox = (($) => {\r\n\r\n    /* Added in v.5.5.0-dhymik:\r\n     * (search for \"added by DhyMik\")\r\n     * \r\n     * 1. auto max data dimensions to max screen dimensions\r\n     * \r\n     *    This solves issues with svg displayed too small\r\n     *    and images / video frames not filling the screen\r\n     * \r\n     * 2. skip resizing and adding inline size styles when\r\n     *    'lightboxFullSize' css class is added to the lighbox <a> tag\r\n     *    \r\n     *    Use this if\r\n     */\r\n\r\n\r\n    const NAME = 'ekkoLightbox'\r\n    const JQUERY_NO_CONFLICT = $.fn[NAME]\r\n\r\n    const Default = {\r\n        debug: 0,   // 0: no debug, 1: on-screen info, 2: on-screen plus pop-ups\r\n        title: '',\r\n        footer: '',\r\n        maxWidth: 9999,\r\n        maxHeight: 9999,\r\n        showArrows: true, //display the left / right arrows or not\r\n        hideArrowsOnVideo: false, //hide the left / right arrows for videos\r\n        wrapping: true, //if true, gallery loops infinitely\r\n        type: null, //force the lightbox into image / youtube mode. if null, or not image|youtube|vimeo; detect it\r\n        alwaysShowClose: false, //always show the close button, even if there is no title\r\n        fade: true, // fade in or not\r\n        verticalAlignCenter: false, // vertically centered modal\r\n        loadingMessage: '<div class=\"ekko-lightbox-loader\"><div><div></div><div></div></div></div>', // http://tobiasahlin.com/spinkit/\r\n        leftArrow: '<span>&#10094;</span>',\r\n        rightArrow: '<span>&#10095;</span>',\r\n        strings: {\r\n            close: 'Close',\r\n            fail: 'Failed to load image:',\r\n            type: 'Could not detect remote target type. Force the type using data-type',\r\n        },\r\n        doc: document, // if in an iframe can specify top.document\r\n        onShow() { },\r\n        onShown() { },\r\n        onHide() { },\r\n        onHidden() { },\r\n        onNavigate() { },\r\n        onContentLoaded() { },\r\n    }\r\n\r\n    class Lightbox {\r\n\r\n        /**\r\n\r\n        Class properties:\r\n\r\n         _$element: null -> the <a> element currently being displayed\r\n         _$modal: The bootstrap modal generated\r\n            _$modalDialog: The .modal-dialog\r\n            _$modalContent: The .modal-content\r\n            _$modalBody: The .modal-body\r\n            _$modalHeader: The .modal-header\r\n            _$modalFooter: The .modal-footer\r\n         _$lightboxContainerOne: Container of the first lightbox element\r\n         _$lightboxContainerTwo: Container of the second lightbox element\r\n         _$lightboxContainerCurrent: the container in use\r\n         _$lightboxContainerUnUsed: the currently unused container\r\n         _$lightboxBody: First element in the container\r\n         _$modalNavLayer: The navigation container, overlaid for images, underlaid for videos\r\n         _$modalArrows: The overlayed arrows container, always overlaid\r\n\r\n         _$galleryItems: Other <a>'s available for this gallery\r\n         _galleryName: Name of the current data('gallery') showing\r\n         _galleryIndex: The current index of the _$galleryItems being shown\r\n\r\n         _config: {} the options for the modal\r\n         _modalId: unique id for the current lightbox\r\n\r\n         */\r\n\r\n        static get Default() {\r\n            return Default\r\n        }\r\n\r\n        constructor($element, config) {\r\n            this._config = $.extend({}, Default, config)\r\n            this._$modalNavLayer = null\r\n            this._$modalArrows = null\r\n            this._$debugInfo = null;\r\n            this._galleryIndex = 0\r\n            this._galleryName = null\r\n            this._titleIsShown = false\r\n            this._footerIsShown = false\r\n            this._wantedWidth = 0\r\n            this._wantedHeight = 0\r\n            this._touchstartX = 0\r\n            this._touchendX = 0\r\n\r\n            this._modalId = `ekkoLightbox-${Math.floor((Math.random() * 1000) + 1)}`;\r\n            this._$element = $element instanceof jQuery ? $element : $($element)\r\n\r\n            this._isBootstrap3 = $.fn.modal.Constructor.VERSION[0] == 3;\r\n\r\n            let h4 = `<h4 class=\"modal-title\">${this._config.title || \"&nbsp;\"}</h4>`;\r\n            let btn = `<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"${this._config.strings.close}\"><span aria-hidden=\"true\">&times;</span></button>`;\r\n\r\n            let fade = this._config.fade ? 'fade in' : '';\r\n            let vertical = this._config.verticalAlignCenter ? 'modal-dialog-centered' : '';\r\n\r\n            let header = `<div class=\"modal-header${this._config.title || this._config.alwaysShowClose ? '' : ' hide'}\">` + (this._isBootstrap3 ? btn + h4 : h4 + btn) + `</div>`;\r\n            let footer = `<div class=\"modal-footer${this._config.footer ? '' : ' hide'}\">${this._config.footer || \"&nbsp;\"}</div>`;\r\n            let body = `<div class=\"modal-body\"><div class=\"ekko-lightbox-container\"><div class=\"ekko-lightbox-item ${fade} show\"></div><div class=\"ekko-lightbox-item fade\"></div></div></div>`;\r\n            let dialog = `<div class=\"modal-dialog ${vertical}\" role=\"document\"><div class=\"modal-content\">${header}${body}${footer}</div></div>`;\r\n            $(this._config.doc.body).append(`<div id=\"${this._modalId}\" class=\"ekko-lightbox modal fade\" tabindex=\"-1\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">${dialog}</div>`)\r\n\r\n            this._$modal = $(`#${this._modalId}`, this._config.doc)\r\n\r\n            if (this._config.debug > 0) this._$modal.append(`<div class=\"modal-debug-info\"></div>`);\r\n            this._$debugInfo = this._$modal.find('.modal-debug-info').first();\r\n\r\n            this._$modalDialog = this._$modal.find('.modal-dialog').first()\r\n            this._$modalContent = this._$modal.find('.modal-content').first()\r\n            this._$modalBody = this._$modal.find('.modal-body').first()\r\n            this._$modalHeader = this._$modal.find('.modal-header').first()\r\n            this._$modalFooter = this._$modal.find('.modal-footer').first()\r\n\r\n            this._$lightboxContainer = this._$modalBody.find('.ekko-lightbox-container').first()\r\n            this._$lightboxBodyOne = this._$lightboxContainer.find('> div:first-child').first()\r\n            this._$lightboxBodyTwo = this._$lightboxContainer.find('> div:last-child').first()\r\n            this._$lightboxContainerCurrent = this._$lightboxBodyOne;\r\n            this._$lightboxContainerUnUsed = this._$lightboxBodyTwo;\r\n\r\n            this._galleryName = this._$element.data('gallery')\r\n            if (this._galleryName) {\r\n                this._$galleryItems = $(document.body).find(`*[data-gallery=\"${this._galleryName}\"]`)\r\n                this._galleryIndex = this._$galleryItems.index(this._$element)\r\n                $(document).on('keydown.ekkoLightbox', this._navigationalBinder.bind(this))\r\n\r\n                // add the directional arrows to the modal\r\n                if (this._config.showArrows && this._$galleryItems.length > 1) {\r\n\r\n                    // add the navigation layer with full surface links\r\n                    this._$lightboxContainer.prepend(`<div class=\"ekko-lightbox-nav-overlay\"><a href=\"#\"></a><a href=\"#\"></a></div>`)\r\n                    this._$modalNavLayer = this._$lightboxContainer.find('div.ekko-lightbox-nav-overlay').first()\r\n\r\n                    // add the link arrows suitable also for video overlay\r\n                    this._$lightboxContainer.append(`<div class=\"ekko-lightbox-nav-arrows\"><a href=\"#\">${this._config.leftArrow}</a><a href=\"#\">${this._config.rightArrow}</a></div>`)\r\n                    this._$modalArrows = this._$lightboxContainer.find('div.ekko-lightbox-nav-arrows').first()\r\n\r\n                    // add the click event handlers to all links\r\n                    this._$lightboxContainer.on('click', 'a:first-child', event => {\r\n                        event.preventDefault()\r\n                        return this.navigateLeft()\r\n                    })\r\n                    this._$lightboxContainer.on('click', 'a:last-child', event => {\r\n                        event.preventDefault()\r\n                        return this.navigateRight()\r\n                    })\r\n\r\n                    // add the hover event handlers to nav surface links, adding hover class to arrow links\r\n                    this._$modalNavLayer.find('a:first-child').hover(\r\n                        () => {\r\n                            this._$modalArrows.find('a:first-child').addClass('hover');\r\n                        },\r\n                        () => {\r\n                            this._$modalArrows.find('a:first-child').removeClass('hover').filter('[class=\"\"]').removeAttr('class');\r\n                        }\r\n                    );\r\n                    this._$modalNavLayer.find('a:last-child').hover(\r\n                        () => {\r\n                            this._$modalArrows.find('a:last-child').addClass('hover');\r\n                        },\r\n                        () => {\r\n                            this._$modalArrows.find('a:last-child').removeClass('hover').filter('[class=\"\"]').removeAttr('class');\r\n                        }\r\n                    );\r\n\r\n                    this.updateNavigation()\r\n                }\r\n            }\r\n\r\n            this._$modal\r\n                .on('show.bs.modal', this._config.onShow.bind(this))\r\n                .on('shown.bs.modal', () => {\r\n                    this._toggleLoading(true)\r\n                    this._handle()\r\n                    return this._config.onShown.call(this)\r\n                })\r\n                .on('hide.bs.modal', this._config.onHide.bind(this))\r\n                .on('hidden.bs.modal', () => {\r\n                    if (this._galleryName) {\r\n                        $(document).off('keydown.ekkoLightbox')\r\n                        $(window).off('resize.ekkoLightbox')\r\n                    }\r\n                    this._$modal.remove()\r\n                    return this._config.onHidden.call(this)\r\n                })\r\n                .modal(this._config)\r\n\r\n            $(window).on('resize.ekkoLightbox', () => {\r\n                this._resize(this._wantedWidth, this._wantedHeight)\r\n            });\r\n\r\n            this._$lightboxContainer\r\n                .on('touchstart', () => {\r\n                    this._touchstartX = event.changedTouches[0].screenX;\r\n\r\n                })\r\n                .on('touchend', () => {\r\n                    this._touchendX = event.changedTouches[0].screenX;\r\n                    this._swipeGesure();\r\n                })\r\n        }\r\n\r\n        element() {\r\n            return this._$element;\r\n        }\r\n\r\n        modal() {\r\n            return this._$modal;\r\n        }\r\n\r\n        navigateTo(index) {\r\n\r\n            if (index < 0 || index > this._$galleryItems.length - 1)\r\n                return this\r\n\r\n            this._galleryIndex = index\r\n\r\n            this.updateNavigation()\r\n\r\n            this._$element = $(this._$galleryItems.get(this._galleryIndex))\r\n            this._handle();\r\n        }\r\n\r\n        navigateLeft() {\r\n\r\n            if (!this._$galleryItems)\r\n                return;\r\n\r\n            if (this._$galleryItems.length === 1)\r\n                return\r\n\r\n            if (this._galleryIndex === 0) {\r\n                if (this._config.wrapping)\r\n                    this._galleryIndex = this._$galleryItems.length - 1\r\n                else\r\n                    return\r\n            }\r\n            else //circular\r\n                this._galleryIndex--\r\n\r\n            this._config.onNavigate.call(this, 'left', this._galleryIndex)\r\n            return this.navigateTo(this._galleryIndex)\r\n        }\r\n\r\n        navigateRight() {\r\n\r\n            if (!this._$galleryItems)\r\n                return;\r\n\r\n            if (this._$galleryItems.length === 1)\r\n                return\r\n\r\n            if (this._galleryIndex === this._$galleryItems.length - 1) {\r\n                if (this._config.wrapping)\r\n                    this._galleryIndex = 0\r\n                else\r\n                    return\r\n            }\r\n            else //circular\r\n                this._galleryIndex++\r\n\r\n            this._config.onNavigate.call(this, 'right', this._galleryIndex)\r\n            return this.navigateTo(this._galleryIndex)\r\n        }\r\n\r\n        updateNavigation() {\r\n            if (!this._config.wrapping) {\r\n                let $nav = this._$lightboxContainer.find('div.ekko-lightbox-nav-overlay')\r\n                if (this._galleryIndex === 0)\r\n                    $nav.find('a:first-child').addClass('disabled')\r\n                else\r\n                    $nav.find('a:first-child').removeClass('disabled')\r\n\r\n                if (this._galleryIndex === this._$galleryItems.length - 1)\r\n                    $nav.find('a:last-child').addClass('disabled')\r\n                else\r\n                    $nav.find('a:last-child').removeClass('disabled')\r\n            }\r\n        }\r\n\r\n        close() {\r\n            return this._$modal.modal('hide');\r\n        }\r\n\r\n        // helper private methods\r\n        _navigationalBinder(event) {\r\n            event = event || window.event;\r\n            if (event.keyCode === 39)\r\n                return this.navigateRight()\r\n            if (event.keyCode === 37)\r\n                return this.navigateLeft()\r\n        }\r\n\r\n        // type detection private methods\r\n        _detectRemoteType(src, type) {\r\n\r\n            type = type || false;\r\n\r\n            if (!type && this._isImage(src))\r\n                type = 'image';\r\n            if (!type && this._getYoutubeId(src))\r\n                type = 'youtube';\r\n            if (!type && this._getVimeoId(src))\r\n                type = 'vimeo';\r\n            if (!type && this._getInstagramId(src))\r\n                type = 'instagram';\r\n            if (type == 'audio' || type == 'video' || (!type && this._isMedia(src)))\r\n                type = 'media';\r\n            if (!type || ['image', 'youtube', 'vimeo', 'instagram', 'media', 'url'].indexOf(type) < 0)\r\n                type = 'url';\r\n\r\n            return type;\r\n        }\r\n\r\n        _getRemoteContentType(src) {\r\n            let response = $.ajax({\r\n                type: 'HEAD',\r\n                url: src,\r\n                async: false\r\n            });\r\n            let contentType = response.getResponseHeader('Content-Type')\r\n            return contentType;\r\n        }\r\n\r\n        _isImage(string) {\r\n            return string && string.match(/(^data:image\\/.*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\\?|#).*)?$)/i)\r\n        }\r\n\r\n        _isMedia(string) {\r\n            return string && string.match(/(\\.(mp3|mp4|ogg|webm|wav)((\\?|#).*)?$)/i)\r\n        }\r\n\r\n        _switchContainers() {\r\n\r\n            let $newCurrent = this._$lightboxContainerUnUsed\r\n            this._$lightboxContainerUnUsed = this._$lightboxContainerCurrent;\r\n            this._$lightboxContainerCurrent = $newCurrent;\r\n\r\n            // switch z-index\r\n            this._$lightboxContainerCurrent.css(\"z-index\", this._$lightboxContainerUnUsed.css(\"z-index\") + 1);\r\n            this._$lightboxContainerUnUsed.css(\"z-index\", \"auto\");\r\n            this._$lightboxContainerCurrent.css(\"z-index\", 1);\r\n\r\n            this._$lightboxContainerUnUsed.removeClass('in show');\r\n            this._$lightboxContainerCurrent.addClass('in show');\r\n\r\n            return;\r\n        }\r\n\r\n        _handle() {\r\n\r\n            // ### Added by DhyMik in v.5.5.0-dhymik:\r\n\r\n            // remove css added in '_preloadImage'\r\n            this._$modalDialog.removeClass(\"imageLoading\");\r\n            this._$modalDialog.removeClass(\"imageLoaded\");\r\n            this._$modalDialog.removeClass(\"imageStretched\");\r\n            this._$modalDialog.removeClass(\"isVideo\");\r\n\r\n            // ### End added by DhyMik in v.5.5.0-dhymik:\r\n\r\n            let $toUse = this._$lightboxContainerUnUsed;\r\n\r\n            // fade out header and footer\r\n            this._$modalHeader.css(\"opacity\", 0);\r\n            this._$modalFooter.css(\"opacity\", 0);\r\n\r\n            this._updateTitleAndFooter()\r\n            this._switchContainers()\r\n\r\n            let currentRemote = this._$element.attr('data-remote') || this._$element.attr('href')\r\n            let currentType = this._detectRemoteType(currentRemote, this._$element.attr('data-type') || false)\r\n\r\n            if (['image', 'youtube', 'vimeo', 'instagram', 'media', 'url'].indexOf(currentType) < 0)\r\n                return this._error(this._config.strings.type)\r\n\r\n            switch (currentType) {\r\n                case 'image':\r\n                    let altTag = this._$element.attr('data-alt') || '';\r\n                    this._preloadImage(currentRemote, altTag, $toUse)\r\n                    this._preloadImageByIndex(this._galleryIndex, 3)\r\n                    break;\r\n                case 'youtube':\r\n                    this._showYoutubeVideo(currentRemote, $toUse);\r\n                    break;\r\n                case 'vimeo':\r\n                    this._showVimeoVideo(this._getVimeoId(currentRemote), $toUse);\r\n                    break;\r\n                case 'instagram':\r\n                    this._showInstagramVideo(this._getInstagramId(currentRemote), $toUse);\r\n                    break;\r\n                case 'media':\r\n                    this._showHtml5Media(currentRemote, $toUse);\r\n                    break;\r\n                default: // url\r\n                    this._loadRemoteContent(currentRemote, $toUse);\r\n                    break;\r\n            }\r\n\r\n            var thisLightbox = this;\r\n\r\n            // fade in header and footer after a delay and delete old content\r\n            setTimeout(function () {\r\n                thisLightbox._$modalHeader.css(\"opacity\", 1);\r\n                thisLightbox._$modalFooter.css(\"opacity\", 1);\r\n                thisLightbox._$lightboxContainerUnUsed.empty();\r\n            }, 250);\r\n\r\n            return this;\r\n        }\r\n\r\n        _getYoutubeId(string) {\r\n            if (!string)\r\n                return false;\r\n            let matches = string.match(/^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=)([^#\\&\\?]*).*/)\r\n            return (matches && matches[2].length === 11) ? matches[2] : false\r\n        }\r\n\r\n        _getVimeoId(string) {\r\n            return string && string.indexOf('vimeo') > 0 ? string : false\r\n        }\r\n\r\n        _getInstagramId(string) {\r\n            return string && string.indexOf('instagram') > 0 ? string : false\r\n        }\r\n\r\n        // layout private methods\r\n        _toggleLoading(show) {\r\n            show = show || false\r\n            if (show) {\r\n                this._$modalDialog.css('display', 'none')\r\n                this._$modal.removeClass('in show')\r\n                $('.modal-backdrop').append(this._config.loadingMessage)\r\n            }\r\n            else {\r\n                this._$modalDialog.css('display', this._config.verticalAlignCenter ? 'flex' : 'block')\r\n                this._$modal.addClass('in show')\r\n                $('.modal-backdrop').find('.ekko-lightbox-loader').remove()\r\n            }\r\n            return this;\r\n        }\r\n\r\n        _calculateScaleFactor(width, height) {\r\n            /* 'calculateScaleFactor' is the size factor to be applied to an image's or video#s dimensions\r\n             * so it will fill the entire screen if browser window is maximized or full-screened.\r\n             * \r\n             * Added in v.5.5.0-dhymik\r\n             * */\r\n            var screenWidth = window.screen.width;      // these are the hardware screen dimensions,\r\n            var screenHeight = window.screen.height;    // not the browser window\r\n\r\n            var videoMaxDimension = Math.max(width, height);\r\n            var screenMaxDimension = Math.max(screenWidth, screenHeight);\r\n\r\n            return screenMaxDimension / videoMaxDimension;\r\n        }\r\n\r\n        _updateTitleAndFooter() {\r\n            let title = this._$element.data('title') || \"\"\r\n            let caption = this._$element.data('footer') || \"\"\r\n\r\n            this._titleIsShown = false\r\n            if (title || this._config.alwaysShowClose) {\r\n                this._titleIsShown = true\r\n                this._$modalHeader.css('display', '').find('.modal-title').html(title || \"&nbsp;\")\r\n                this._$modalDialog.addClass(\"headerIsShown\");\r\n            }\r\n            else {\r\n                this._$modalHeader.css('display', 'none')\r\n                this._$modalDialog.removeClass(\"headerIsShown\");\r\n            }\r\n\r\n            this._footerIsShown = false\r\n            if (caption) {\r\n                this._footerIsShown = true\r\n                this._$modalFooter.css('display', '').html(caption)\r\n                this._$modalDialog.addClass(\"footerIsShown\");\r\n            }\r\n            else {\r\n                this._$modalFooter.css('display', 'none')\r\n                this._$modalDialog.removeClass(\"footerIsShown\");\r\n            }\r\n\r\n            return this;\r\n        }\r\n\r\n        _showYoutubeVideo(remote, $containerForElement) {\r\n            let id = this._getYoutubeId(remote)\r\n            let query = remote.indexOf('&') > 0 ? remote.substr(remote.indexOf('&')) : ''\r\n            let width = this._$element.data('width') || 560\r\n            let height = this._$element.data('height') || width / (560 / 315)\r\n            return this._showVideoIframe(\r\n                `//www.youtube.com/embed/${id}?badge=0&autoplay=1&html5=1${query}`,\r\n                width,\r\n                height,\r\n                $containerForElement\r\n            );\r\n        }\r\n\r\n        _showVimeoVideo(id, $containerForElement) {\r\n            let width = this._$element.data('width') || 500\r\n            let height = this._$element.data('height') || width / (560 / 315)\r\n            return this._showVideoIframe(id + '?autoplay=1', width, height, $containerForElement)\r\n        }\r\n\r\n        _showInstagramVideo(id, $containerForElement) {\r\n            // instagram load their content into iframes so this can be put straight into the element\r\n            let width = this._$element.data('width') || 612\r\n            let height = width + 80;\r\n            id = id.substr(-1) !== '/' ? id + '/' : id; // ensure id has trailing slash\r\n            $containerForElement.html(`<iframe width=\"${width}\" height=\"${height}\" src=\"${id}embed/\" frameborder=\"0\" allowfullscreen></iframe>`);\r\n            this._resize(width, height);\r\n            this._config.onContentLoaded.call(this);\r\n            if (this._$modalNavLayer) this._$modalNavLayer.css('display', !this._config.hideArrowsOnVideo ? '' : 'none');\r\n            this._$modalDialog.addClass(\"isVideo\");\r\n            this._toggleLoading(false);\r\n            return this;\r\n        }\r\n\r\n        _showVideoIframe(url, width, height, $containerForElement) { // should be used for videos only. for remote content use loadRemoteContent (data-type=url)\r\n            height = height || width; // default to square\r\n\r\n            // Added in v.5.5.0-dhymik:\r\n            var scalingFactor = this._calculateScaleFactor(width, height);\r\n            width = width * scalingFactor;\r\n            height = height * scalingFactor;\r\n            // added end.\r\n\r\n            $containerForElement.html(`<div class=\"embed-responsive embed-responsive-16by9\"><iframe width=\"${width}\" height=\"${height}\" src=\"${url}\" frameborder=\"0\" allowfullscreen class=\"embed-responsive-item\"></iframe></div>`);\r\n            this._resize(width, height);\r\n            this._config.onContentLoaded.call(this);\r\n            if (this._$modalNavLayer) this._$modalNavLayer.css('display', !this._config.hideArrowsOnVideo ? '' : 'none');\r\n            this._$modalDialog.addClass(\"isVideo\");\r\n            this._toggleLoading(false);\r\n            return this;\r\n        }\r\n\r\n        _showHtml5Media(url, $containerForElement) { // should be used for videos only. for remote content use loadRemoteContent (data-type=url)\r\n            let contentType = this._getRemoteContentType(url);\r\n            if (!contentType) {\r\n                return this._error(this._config.strings.type)\r\n            }\r\n            let mediaType = '';\r\n            if (contentType.indexOf('audio') > 0) {\r\n                mediaType = 'audio';\r\n            } else {\r\n                mediaType = 'video';\r\n            }\r\n            let width = this._$element.data('width') || 560\r\n            let height = this._$element.data('height') || width / (560 / 315)\r\n\r\n            // ### Added by DhyMik in v.5.5.0-dhymik:\r\n            var scalingFactor = this._calculateScaleFactor(width, height);\r\n            width = width * scalingFactor;\r\n            height = height * scalingFactor;\r\n            // ### added end.\r\n\r\n            $containerForElement.html(`<div class=\"embed-responsive embed-responsive-16by9\"><${mediaType} width=\"${width}\" height=\"${height}\" preload=\"auto\" autoplay controls class=\"embed-responsive-item\"><source src=\"${url}\" type=\"${contentType}\">${this._config.strings.type}</${mediaType}></div>`);\r\n            this._resize(width, height);\r\n            this._config.onContentLoaded.call(this);\r\n            if (this._$modalNavLayer) this._$modalNavLayer.css('display', !this._config.hideArrowsOnVideo ? '' : 'none');\r\n            this._$modalDialog.addClass(\"isVideo\");\r\n            this._toggleLoading(false);\r\n            return this;\r\n        }\r\n\r\n        _loadRemoteContent(url, $containerForElement) {\r\n            let width = this._$element.data('width') || 560;\r\n            let height = this._$element.data('height') || 560;\r\n\r\n            let disableExternalCheck = this._$element.data('disableExternalCheck') || false;\r\n            this._toggleLoading(false);\r\n\r\n            // ### Added by DhyMik in v.5.5.0-dhymik:\r\n            var scalingFactor = this._calculateScaleFactor(width, height);\r\n            width = width * scalingFactor;\r\n            height = height * scalingFactor;\r\n            // ### added end.\r\n\r\n            // external urls are loading into an iframe\r\n            // local ajax can be loaded into the container itself\r\n            if (!disableExternalCheck && !this._isExternal(url)) {\r\n                $containerForElement.load(url, $.proxy(() => {\r\n                    return this._$element.trigger('loaded.bs.modal');\r\n                }));\r\n\r\n            } else {\r\n                $containerForElement.html(`<iframe src=\"${url}\" frameborder=\"0\" allowfullscreen></iframe>`);\r\n                this._config.onContentLoaded.call(this);\r\n            }\r\n\r\n            if (this._$modalNavLayer) this._$modalNavLayer.css('display', !this._config.hideArrowsOnVideo ? '' : 'none');\r\n            this._$modalDialog.addClass(\"isVideo\");\r\n\r\n            this._resize(width, height);\r\n            return this;\r\n        }\r\n\r\n        _isExternal(url) {\r\n            let match = url.match(/^([^:\\/?#]+:)?(?:\\/\\/([^\\/?#]*))?([^?#]+)?(\\?[^#]*)?(#.*)?/);\r\n            if (typeof match[1] === \"string\" && match[1].length > 0 && match[1].toLowerCase() !== location.protocol)\r\n                return true;\r\n\r\n            if (typeof match[2] === \"string\" && match[2].length > 0 && match[2].replace(new RegExp(`:(${{\r\n                \"http:\": 80,\r\n                \"https:\": 443\r\n            }[location.protocol]})?$`), \"\") !== location.host)\r\n                return true;\r\n\r\n            return false;\r\n        }\r\n\r\n        _error(message) {\r\n            console.error(message);\r\n            this._$lightboxContainerCurrent.html(message);\r\n            this._resize(300, 300);\r\n            return this;\r\n        }\r\n\r\n        _preloadImageByIndex(startIndex, numberOfTimes) {\r\n\r\n            if (!this._$galleryItems)\r\n                return;\r\n\r\n            let next = $(this._$galleryItems.get(startIndex), false)\r\n            if (typeof next == 'undefined')\r\n                return\r\n\r\n            let src = next.attr('data-remote') || next.attr('href')\r\n            if (next.attr('data-type') === 'image' || this._isImage(src))\r\n                this._preloadImage(src, '', false)\r\n\r\n            if (numberOfTimes > 0)\r\n                return this._preloadImageByIndex(startIndex + 1, numberOfTimes - 1);\r\n        }\r\n\r\n        _preloadImage(src, altTag, $containerForImage) {\r\n\r\n            $containerForImage = $containerForImage || false\r\n\r\n            let img = new Image();\r\n            let loadingTimeout = null;\r\n            if ($containerForImage) {\r\n                // if loading takes > 200ms show a loader\r\n                loadingTimeout = setTimeout(() => {\r\n                    $containerForImage.append(this._config.loadingMessage)\r\n                }, 200);\r\n            }\r\n\r\n            img.onload = () => {\r\n                if ($containerForImage) {\r\n\r\n                    if (loadingTimeout)\r\n                        clearTimeout(loadingTimeout)\r\n                    loadingTimeout = null;\r\n\r\n                    let image = $('<img />');\r\n                    image.attr('src', img.src);\r\n                    image.attr('alt', altTag);\r\n                    image.addClass('img-fluid');\r\n\r\n                    // backward compatibility for bootstrap v3\r\n                    image.css('width', '100% !important');\r\n\r\n                    // if the \"data-markup\" attribute is set on the <a> tag...\r\n                    if (this._$element[0].hasAttribute(\"data-markup\")) {\r\n\r\n                        // ...then the \"data-markup\" attribute value provides the repalcement markup\r\n                        var markup = this._$element.attr(\"data-markup\");\r\n                        $containerForImage.html(markup);\r\n                    } else {\r\n                        $containerForImage.html(image);\r\n                    }\r\n\r\n                    if (this._$modalNavLayer) this._$modalNavLayer.css('display', '');\r\n\r\n                    /* ***** determine image dimensions ****\r\n                     * \r\n                     * If image dimensions can be determined \r\n                     * - a max-width inline style is added to .modal-dialog element\r\n                     * - a height inline style is added to .ekko-lightbox-container element\r\n                     * inside of _resize() function.\r\n                     * \r\n                     * In this case, a black backddrop is used behind images to prevent\r\n                     * background bleed during image transitions\r\n                     * \r\n                     * If image dimensions cannot be determined, images are stretched\r\n                     * to maximum dimensions by maximizing all parent containers.\r\n                     * In this case\r\n                     * - 'imageStretched' css class is added to .modal-dialog element\r\n                     * - black backdrop is not being used, to prevent backdrop from\r\n                     *   extending over entire screen regardless of image size.\r\n                     * */\r\n\r\n                    this._$modalDialog.css('display', this._config.verticalAlignCenter ? 'flex' : 'block');\r\n\r\n                    this._$modalDialog.addClass(\"imageLoading\");\r\n                    // temporarily stretches img parent containers so image dimensions can be determined.\r\n\r\n                    var clientWidth = 0;\r\n                    var clientHeight = 0;\r\n\r\n                    // this works in Firefox etc. for jpg AND svg:\r\n                    var imageWidth = $containerForImage.find(\"img\")[0].width;\r\n                    var imageHeight = $containerForImage.find(\"img\")[0].height;\r\n\r\n                    // this works in Chrome etc. for jpg AND svg:\r\n                    var imgWidth = img.width;\r\n                    var imgHeight = img.height;\r\n\r\n                    if (imageWidth > 0 && imageHeight > 0) {\r\n                        clientWidth = imageWidth;\r\n                        clientHeight = imageHeight;\r\n                    }\r\n                    else if (imgWidth > 0 && imgHeight > 0) {\r\n                        clientWidth = imgWidth;\r\n                        clientHeight = imgHeight;\r\n                    }\r\n\r\n                    this._$modalDialog.removeClass(\"imageLoading\");\r\n                    // remove temporary parent container stretch\r\n\r\n                    if (clientWidth > 0 && clientHeight > 0) {\r\n                        // we found image dimensions...\r\n                        if (this._config.debug > 1) alert(\r\n                            \"imageWidth: \" + imageWidth + \", \\\\n\" +\r\n                            \"imageHeight: \" + imageHeight + \", \\\\n\" +\r\n                            \"imgWidth: \" + imgWidth + \", \\\\n\" +\r\n                            \"imgHeight: \" + imgHeight + \".\"\r\n                        );\r\n                        // ...resize the parent containers accordingly:\r\n                        this._resize(clientWidth, clientHeight);\r\n                    }\r\n                    else {\r\n                        // we did not find image dimensions, use stretch method by css:\r\n                        this._$modalDialog.addClass(\"imageStretched\");\r\n                        if (this._config.debug > 1) alert(\"imageStretched\");\r\n                        if (window.console) console.log(\"ekko lightbox: using 'imageStretched' mode for \" + img.src);\r\n                    }\r\n\r\n                    this._$modalDialog.addClass(\"imageLoaded\");\r\n\r\n                    this._toggleLoading(false);\r\n                    return this._config.onContentLoaded.call(this);\r\n                }\r\n            };\r\n\r\n            if ($containerForImage) {\r\n                img.onerror = () => {\r\n                    this._toggleLoading(false);\r\n                    return this._error(this._config.strings.fail + `  ${src}`);\r\n                };\r\n            }\r\n\r\n            img.src = src;\r\n            return img;\r\n        }\r\n\r\n        _swipeGesure() {\r\n            if (this._touchendX < this._touchstartX) {\r\n                return this.navigateRight();\r\n            }\r\n            if (this._touchendX > this._touchstartX) {\r\n                return this.navigateLeft();\r\n            }\r\n        }\r\n\r\n        _resize(width, height) {\r\n\r\n            height = height || width;\r\n\r\n            var scalingFactor = this._calculateScaleFactor(width, height);\r\n            width = width * scalingFactor;\r\n            height = height * scalingFactor;\r\n\r\n            this._wantedWidth = width;\r\n            this._wantedHeight = height;\r\n\r\n            if (this._config.debug > 1) alert(\"wanted width: \" + this._wantedWidth + \", wanted height: \" + this._wantedHeight);\r\n\r\n            let imageAspecRatio = width / height;\r\n\r\n            this._$modalDialog.addClass(\"imageLoading\");\r\n            // temporarily stretches img parent containers so element dimensions can be determined.\r\n\r\n            var modalDialogOuterWidthExcludingMargins = this._$modalDialog.outerWidth(false);\r\n            var modalImageContainerInnerWidth = this._$lightboxContainer.innerWidth();\r\n\r\n            var modalDialogOuterHeightExcludingMargins = this._$modalDialog.outerHeight(false);\r\n            var modalDialogOuterHeightIncludingMargins = this._$modalDialog.outerHeight(true);\r\n            var modalImageContainerInnerHeight = this._$lightboxContainer.innerHeight();\r\n\r\n            this._$modalDialog.removeClass(\"imageLoading\");\r\n\r\n            // the width difference between image container and .modal-dialog element (excluding its margin), which gets the 'max-width' inline style added\r\n            var widthInnerSpacing = modalDialogOuterWidthExcludingMargins - modalImageContainerInnerWidth;\r\n\r\n            // the height difference between .moda-dialog element (excluding its margins) and the image container element, which gets the 'height' inline style added\r\n            var heightInnerSpacing = modalDialogOuterHeightExcludingMargins - modalImageContainerInnerHeight;\r\n            var heightOuterSpacing = modalDialogOuterHeightIncludingMargins - modalImageContainerInnerHeight;\r\n\r\n            let maxWidth = Math.min(modalDialogOuterWidthExcludingMargins, this._config.doc.body.clientWidth, this._config.maxWidth)\r\n\r\n            // if width > the available space, scale down the expected width and height\r\n\r\n            if ((width + widthInnerSpacing) > maxWidth) {\r\n                height = (maxWidth - widthInnerSpacing) / imageAspecRatio;\r\n                width = maxWidth\r\n            } else\r\n                width = (width + widthInnerSpacing)\r\n\r\n            let headerHeight = 0,\r\n                footerHeight = 0\r\n\r\n            // as the resize is performed the modal is show, the calculate might fail\r\n            // if so, default to the default sizes\r\n            if (this._footerIsShown)\r\n                footerHeight = this._$modalFooter.outerHeight(true) || 55\r\n\r\n            if (this._titleIsShown)\r\n                headerHeight = this._$modalHeader.outerHeight(true) || 67\r\n\r\n            let maxHeight = Math.min(height, window.innerHeight - heightOuterSpacing - headerHeight - footerHeight, this._config.maxHeight - heightInnerSpacing - headerHeight - footerHeight);\r\n\r\n            if (height > maxHeight) {\r\n                // if height > the available height, scale down the width\r\n                width = Math.ceil(maxHeight * imageAspecRatio) + widthInnerSpacing;\r\n            }\r\n\r\n            this._$lightboxContainer.css('height', maxHeight)\r\n            this._$modalDialog.css('flex', '1').css('maxWidth', width);\r\n\r\n            if (this._config.debug > 0 && this._$debugInfo) {\r\n                var message = \"window width: \" + $(window).width()\r\n                    + \",\\nwindow height: \" + $(window).height()\r\n                    + \",\\nwindow screen width: \" + window.screen.width\r\n                    + \",\\nwindow screen height: \" + window.screen.height\r\n                    + \",\\nwindow inner width: \" + window.innerWidth\r\n                    + \",\\nwindow inner height: \" + window.innerHeight\r\n                    + \",\\n maxheight: \" + maxHeight;\r\n\r\n                this._$debugInfo.text(message);\r\n            }\r\n\r\n            let modal = this._$modal.data('bs.modal');\r\n            if (modal) {\r\n                // v4 method is mistakenly protected\r\n                try {\r\n                    modal._handleUpdate();\r\n                } catch (Exception) {\r\n                    modal.handleUpdate();\r\n                }\r\n            }\r\n            return this;\r\n        }\r\n\r\n        static _jQueryInterface(config) {\r\n            config = config || {}\r\n            return this.each(() => {\r\n                let $this = $(this)\r\n                let _config = $.extend(\r\n                    {},\r\n                    Lightbox.Default,\r\n                    $this.data(),\r\n                    typeof config === 'object' && config\r\n                )\r\n\r\n                new Lightbox(this, _config)\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n\r\n    $.fn[NAME] = Lightbox._jQueryInterface\r\n    $.fn[NAME].Constructor = Lightbox\r\n    $.fn[NAME].noConflict = () => {\r\n        $.fn[NAME] = JQUERY_NO_CONFLICT\r\n        return Lightbox._jQueryInterface\r\n    }\r\n\r\n    return Lightbox\r\n\r\n})(jQuery)\r\n\r\nexport default Lightbox\r\n"],"file":"ekko-lightbox.js"}