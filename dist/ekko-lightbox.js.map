{"version":3,"sources":["../ekko-lightbox.js"],"names":["Lightbox","$","NAME","JQUERY_NO_CONFLICT","fn","Default","debug","title","footer","maxWidth","maxHeight","showArrows","hideArrowsOnVideo","wrapping","type","alwaysShowClose","fade","verticalAlignCenter","loadingMessage","leftArrow","rightArrow","strings","close","fail","doc","document","onShow","onShown","onHide","onHidden","onNavigate","onContentLoaded","$element","config","_config","extend","_$modalArrows","_galleryIndex","_galleryName","_titleIsShown","_footerIsShown","_wantedWidth","_wantedHeight","_touchstartX","_touchendX","_modalId","Math","floor","random","_$element","jQuery","_isBootstrap3","modal","Constructor","VERSION","h4","btn","vertical","header","body","dialog","append","_$modal","_$modalDialog","find","first","_$modalContent","_$modalBody","_$modalHeader","_$modalFooter","_$lightboxContainer","_$lightboxBodyOne","_$lightboxBodyTwo","data","_$galleryItems","index","on","_navigationalBinder","bind","length","prepend","event","preventDefault","navigateLeft","navigateRight","updateNavigation","_toggleLoading","_handle","call","off","window","remove","_resize","changedTouches","screenX","_swipeGesure","get","navigateTo","$nav","addClass","removeClass","keyCode","src","_isImage","_getYoutubeId","_getVimeoId","_getInstagramId","_isMedia","indexOf","response","ajax","url","async","contentType","getResponseHeader","string","match","$toUse","$current","hasClass","setTimeout","empty","_containerToUse","_updateTitleAndFooter","currentRemote","attr","currentType","_detectRemoteType","_error","altTag","_preloadImage","_preloadImageByIndex","_showYoutubeVideo","_showVimeoVideo","_showInstagramVideo","_showHtml5Media","_loadRemoteContent","matches","show","css","width","height","screenWidth","screen","screenHeight","videoMaxDimension","max","screenMaxDimension","caption","html","remote","$containerForElement","id","query","substr","_showVideoIframe","scalingFactor","_calculateScaleFactor","_getRemoteContentType","mediaType","disableExternalCheck","_isExternal","load","proxy","trigger","toLowerCase","location","protocol","replace","RegExp","host","message","console","error","startIndex","numberOfTimes","next","$containerForImage","img","Image","loadingTimeout","onload","clearTimeout","image","clientWidth","clientHeight","imageWidth","imageHeight","imgWidth","imgHeight","alert","onerror","imageAspecRatio","modalDialogOuterWidthExcludingMargins","outerWidth","modalImageContainerInnerWidth","innerWidth","modalDialogOuterHeightExcludingMargins","outerHeight","modalDialogOuterHeightIncludingMargins","modalImageContainerInnerHeight","innerHeight","widthInnerSpacing","heightInnerSpacing","heightOuterSpacing","min","headerHeight","footerHeight","ceil","childNodes","innerText","_handleUpdate","Exception","handleUpdate","each","$this","_jQueryInterface","noConflict"],"mappings":";;;;;;;;;;;;;;;AAAA,IAAMA,QAAQ,GAAI,UAACC,CAAD,EAAO;AAErB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGI,MAAMC,IAAI,GAAG,cAAb;AACA,MAAMC,kBAAkB,GAAGF,CAAC,CAACG,EAAF,CAAKF,IAAL,CAA3B;AAEA,MAAMG,OAAO,GAAG;AACZC,IAAAA,KAAK,EAAE,KADK;AAEZC,IAAAA,KAAK,EAAE,EAFK;AAGZC,IAAAA,MAAM,EAAE,EAHI;AAIZC,IAAAA,QAAQ,EAAE,IAJE;AAKZC,IAAAA,SAAS,EAAE,IALC;AAMZC,IAAAA,UAAU,EAAE,IANA;AAMM;AAClBC,IAAAA,iBAAiB,EAAE,KAPP;AAOc;AAC1BC,IAAAA,QAAQ,EAAE,IARE;AAQI;AAChBC,IAAAA,IAAI,EAAE,IATM;AASA;AACZC,IAAAA,eAAe,EAAE,KAVL;AAUY;AACxBC,IAAAA,IAAI,EAAE,IAXM;AAWA;AACZC,IAAAA,mBAAmB,EAAE,KAZT;AAYgB;AAC5BC,IAAAA,cAAc,EAAE,2EAbJ;AAaiF;AAC7FC,IAAAA,SAAS,EAAE,uBAdC;AAeZC,IAAAA,UAAU,EAAE,uBAfA;AAgBZC,IAAAA,OAAO,EAAE;AACLC,MAAAA,KAAK,EAAE,OADF;AAELC,MAAAA,IAAI,EAAE,uBAFD;AAGLT,MAAAA,IAAI,EAAE;AAHD,KAhBG;AAqBZU,IAAAA,GAAG,EAAEC,QArBO;AAqBG;AACfC,IAAAA,MAtBY,oBAsBH,CAAG,CAtBA;AAuBZC,IAAAA,OAvBY,qBAuBF,CAAG,CAvBD;AAwBZC,IAAAA,MAxBY,oBAwBH,CAAG,CAxBA;AAyBZC,IAAAA,QAzBY,sBAyBD,CAAG,CAzBF;AA0BZC,IAAAA,UA1BY,wBA0BC,CAAG,CA1BJ;AA2BZC,IAAAA,eA3BY,6BA2BM,CAAG;AA3BT,GAAhB;;AApBqB,MAkDf/B,QAlDe;AAiFjB,sBAAYgC,QAAZ,EAAsBC,MAAtB,EAA8B;AAAA;;AAAA;;AAC1B,WAAKC,OAAL,GAAejC,CAAC,CAACkC,MAAF,CAAS,EAAT,EAAa9B,OAAb,EAAsB4B,MAAtB,CAAf;AACA,WAAKG,aAAL,GAAqB,IAArB;AACA,WAAKC,aAAL,GAAqB,CAArB;AACA,WAAKC,YAAL,GAAoB,IAApB;AACA,WAAKC,aAAL,GAAqB,KAArB;AACA,WAAKC,cAAL,GAAsB,KAAtB;AACA,WAAKC,YAAL,GAAoB,CAApB;AACA,WAAKC,aAAL,GAAqB,CAArB;AACA,WAAKC,YAAL,GAAoB,CAApB;AACA,WAAKC,UAAL,GAAkB,CAAlB;AAEA,WAAKC,QAAL,0BAAgCC,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACE,MAAL,KAAgB,IAAjB,GAAyB,CAApC,CAAhC;AACA,WAAKC,SAAL,GAAiBjB,QAAQ,YAAYkB,MAApB,GAA6BlB,QAA7B,GAAwC/B,CAAC,CAAC+B,QAAD,CAA1D;AAEA,WAAKmB,aAAL,GAAqBlD,CAAC,CAACG,EAAF,CAAKgD,KAAL,CAAWC,WAAX,CAAuBC,OAAvB,CAA+B,CAA/B,KAAqC,CAA1D;AAEA,UAAIC,EAAE,uCAA8B,KAAKrB,OAAL,CAAa3B,KAAb,IAAsB,QAApD,UAAN;AACA,UAAIiD,GAAG,yFAA2E,KAAKtB,OAAL,CAAab,OAAb,CAAqBC,KAAhG,0DAAP;AAEA,UAAIN,IAAI,GAAG,KAAKkB,OAAL,CAAalB,IAAb,GAAoB,SAApB,GAAgC,EAA3C;AACA,UAAIyC,QAAQ,GAAG,KAAKvB,OAAL,CAAajB,mBAAb,GAAmC,uBAAnC,GAA6D,EAA5E;AAEA,UAAIyC,MAAM,GAAG,mCAA2B,KAAKxB,OAAL,CAAa3B,KAAb,IAAsB,KAAK2B,OAAL,CAAanB,eAAnC,GAAqD,EAArD,GAA0D,OAArF,YAAoG,KAAKoC,aAAL,GAAqBK,GAAG,GAAGD,EAA3B,GAAgCA,EAAE,GAAGC,GAAzI,YAAb;AACA,UAAIhD,MAAM,sCAA8B,KAAK0B,OAAL,CAAa1B,MAAb,GAAsB,EAAtB,GAA2B,OAAzD,gBAAqE,KAAK0B,OAAL,CAAa1B,MAAb,IAAuB,QAA5F,WAAV;AACA,UAAImD,IAAI,8GAAkG3C,IAAlG,4EAAR;AACA,UAAI4C,MAAM,uCAA+BH,QAA/B,+DAAuFC,MAAvF,SAAgGC,IAAhG,SAAuGnD,MAAvG,iBAAV;AACAP,MAAAA,CAAC,CAAC,KAAKiC,OAAL,CAAaV,GAAb,CAAiBmC,IAAlB,CAAD,CAAyBE,MAAzB,qBAA4C,KAAKhB,QAAjD,wHAA4Je,MAA5J;AAEA,WAAKE,OAAL,GAAe7D,CAAC,YAAK,KAAK4C,QAAV,GAAsB,KAAKX,OAAL,CAAaV,GAAnC,CAAhB;AACA,WAAKuC,aAAL,GAAqB,KAAKD,OAAL,CAAaE,IAAb,CAAkB,eAAlB,EAAmCC,KAAnC,EAArB;AACA,WAAKC,cAAL,GAAsB,KAAKJ,OAAL,CAAaE,IAAb,CAAkB,gBAAlB,EAAoCC,KAApC,EAAtB;AACA,WAAKE,WAAL,GAAmB,KAAKL,OAAL,CAAaE,IAAb,CAAkB,aAAlB,EAAiCC,KAAjC,EAAnB;AACA,WAAKG,aAAL,GAAqB,KAAKN,OAAL,CAAaE,IAAb,CAAkB,eAAlB,EAAmCC,KAAnC,EAArB;AACA,WAAKI,aAAL,GAAqB,KAAKP,OAAL,CAAaE,IAAb,CAAkB,eAAlB,EAAmCC,KAAnC,EAArB;AAEA,WAAKK,mBAAL,GAA2B,KAAKH,WAAL,CAAiBH,IAAjB,CAAsB,0BAAtB,EAAkDC,KAAlD,EAA3B;AACA,WAAKM,iBAAL,GAAyB,KAAKD,mBAAL,CAAyBN,IAAzB,CAA8B,mBAA9B,EAAmDC,KAAnD,EAAzB;AACA,WAAKO,iBAAL,GAAyB,KAAKF,mBAAL,CAAyBN,IAAzB,CAA8B,kBAA9B,EAAkDC,KAAlD,EAAzB;AAEA,WAAK3B,YAAL,GAAoB,KAAKW,SAAL,CAAewB,IAAf,CAAoB,SAApB,CAApB;;AACA,UAAI,KAAKnC,YAAT,EAAuB;AACnB,aAAKoC,cAAL,GAAsBzE,CAAC,CAACwB,QAAQ,CAACkC,IAAV,CAAD,CAAiBK,IAAjB,4BAAyC,KAAK1B,YAA9C,SAAtB;AACA,aAAKD,aAAL,GAAqB,KAAKqC,cAAL,CAAoBC,KAApB,CAA0B,KAAK1B,SAA/B,CAArB;AACAhD,QAAAA,CAAC,CAACwB,QAAD,CAAD,CAAYmD,EAAZ,CAAe,sBAAf,EAAuC,KAAKC,mBAAL,CAAyBC,IAAzB,CAA8B,IAA9B,CAAvC,EAHmB,CAKnB;;AACA,YAAI,KAAK5C,OAAL,CAAavB,UAAb,IAA2B,KAAK+D,cAAL,CAAoBK,MAApB,GAA6B,CAA5D,EAA+D;AAC3D,eAAKT,mBAAL,CAAyBU,OAAzB,kEAAuF,KAAK9C,OAAL,CAAaf,SAApG,+BAAgI,KAAKe,OAAL,CAAad,UAA7I;;AACA,eAAKgB,aAAL,GAAqB,KAAKkC,mBAAL,CAAyBN,IAAzB,CAA8B,+BAA9B,EAA+DC,KAA/D,EAArB;;AACA,eAAKK,mBAAL,CAAyBM,EAAzB,CAA4B,OAA5B,EAAqC,eAArC,EAAsD,UAAAK,KAAK,EAAI;AAC3DA,YAAAA,KAAK,CAACC,cAAN;AACA,mBAAO,KAAI,CAACC,YAAL,EAAP;AACH,WAHD;;AAIA,eAAKb,mBAAL,CAAyBM,EAAzB,CAA4B,OAA5B,EAAqC,cAArC,EAAqD,UAAAK,KAAK,EAAI;AAC1DA,YAAAA,KAAK,CAACC,cAAN;AACA,mBAAO,KAAI,CAACE,aAAL,EAAP;AACH,WAHD;;AAIA,eAAKC,gBAAL;AACH;AACJ;;AAED,WAAKvB,OAAL,CACKc,EADL,CACQ,eADR,EACyB,KAAK1C,OAAL,CAAaR,MAAb,CAAoBoD,IAApB,CAAyB,IAAzB,CADzB,EAEKF,EAFL,CAEQ,gBAFR,EAE0B,YAAM;AACxB,QAAA,KAAI,CAACU,cAAL,CAAoB,IAApB;;AACA,QAAA,KAAI,CAACC,OAAL;;AACA,eAAO,KAAI,CAACrD,OAAL,CAAaP,OAAb,CAAqB6D,IAArB,CAA0B,KAA1B,CAAP;AACH,OANL,EAOKZ,EAPL,CAOQ,eAPR,EAOyB,KAAK1C,OAAL,CAAaN,MAAb,CAAoBkD,IAApB,CAAyB,IAAzB,CAPzB,EAQKF,EARL,CAQQ,iBARR,EAQ2B,YAAM;AACzB,YAAI,KAAI,CAACtC,YAAT,EAAuB;AACnBrC,UAAAA,CAAC,CAACwB,QAAD,CAAD,CAAYgE,GAAZ,CAAgB,sBAAhB;AACAxF,UAAAA,CAAC,CAACyF,MAAD,CAAD,CAAUD,GAAV,CAAc,qBAAd;AACH;;AACD,QAAA,KAAI,CAAC3B,OAAL,CAAa6B,MAAb;;AACA,eAAO,KAAI,CAACzD,OAAL,CAAaL,QAAb,CAAsB2D,IAAtB,CAA2B,KAA3B,CAAP;AACH,OAfL,EAgBKpC,KAhBL,CAgBW,KAAKlB,OAhBhB;;AAkBAjC,MAAAA,CAAC,CAACyF,MAAD,CAAD,CAAUd,EAAV,CAAa,qBAAb,EAAoC,YAAM;AACtC,QAAA,KAAI,CAACgB,OAAL,CAAa,KAAI,CAACnD,YAAlB,EAAgC,KAAI,CAACC,aAArC;AACH,OAFD;;AAGA,WAAK4B,mBAAL,CACKM,EADL,CACQ,YADR,EACsB,YAAM;AACpB,QAAA,KAAI,CAACjC,YAAL,GAAoBsC,KAAK,CAACY,cAAN,CAAqB,CAArB,EAAwBC,OAA5C;AAEH,OAJL,EAKKlB,EALL,CAKQ,UALR,EAKoB,YAAM;AAClB,QAAA,KAAI,CAAChC,UAAL,GAAkBqC,KAAK,CAACY,cAAN,CAAqB,CAArB,EAAwBC,OAA1C;;AACA,QAAA,KAAI,CAACC,YAAL;AACH,OARL;AASH;;AA7KgB;AAAA;AAAA,aA+KjB,mBAAU;AACN,eAAO,KAAK9C,SAAZ;AACH;AAjLgB;AAAA;AAAA,aAmLjB,iBAAQ;AACJ,eAAO,KAAKa,OAAZ;AACH;AArLgB;AAAA;AAAA,aAuLjB,oBAAWa,KAAX,EAAkB;AAEd,YAAIA,KAAK,GAAG,CAAR,IAAaA,KAAK,GAAG,KAAKD,cAAL,CAAoBK,MAApB,GAA6B,CAAtD,EACI,OAAO,IAAP;AAEJ,aAAK1C,aAAL,GAAqBsC,KAArB;AAEA,aAAKU,gBAAL;AAEA,aAAKpC,SAAL,GAAiBhD,CAAC,CAAC,KAAKyE,cAAL,CAAoBsB,GAApB,CAAwB,KAAK3D,aAA7B,CAAD,CAAlB;;AACA,aAAKkD,OAAL;AACH;AAlMgB;AAAA;AAAA,aAoMjB,wBAAe;AAEX,YAAI,CAAC,KAAKb,cAAV,EACI;AAEJ,YAAI,KAAKA,cAAL,CAAoBK,MAApB,KAA+B,CAAnC,EACI;;AAEJ,YAAI,KAAK1C,aAAL,KAAuB,CAA3B,EAA8B;AAC1B,cAAI,KAAKH,OAAL,CAAarB,QAAjB,EACI,KAAKwB,aAAL,GAAqB,KAAKqC,cAAL,CAAoBK,MAApB,GAA6B,CAAlD,CADJ,KAGI;AACP,SALD,MAMK;AACD,eAAK1C,aAAL;;AAEJ,aAAKH,OAAL,CAAaJ,UAAb,CAAwB0D,IAAxB,CAA6B,IAA7B,EAAmC,MAAnC,EAA2C,KAAKnD,aAAhD;;AACA,eAAO,KAAK4D,UAAL,CAAgB,KAAK5D,aAArB,CAAP;AACH;AAvNgB;AAAA;AAAA,aAyNjB,yBAAgB;AAEZ,YAAI,CAAC,KAAKqC,cAAV,EACI;AAEJ,YAAI,KAAKA,cAAL,CAAoBK,MAApB,KAA+B,CAAnC,EACI;;AAEJ,YAAI,KAAK1C,aAAL,KAAuB,KAAKqC,cAAL,CAAoBK,MAApB,GAA6B,CAAxD,EAA2D;AACvD,cAAI,KAAK7C,OAAL,CAAarB,QAAjB,EACI,KAAKwB,aAAL,GAAqB,CAArB,CADJ,KAGI;AACP,SALD,MAMK;AACD,eAAKA,aAAL;;AAEJ,aAAKH,OAAL,CAAaJ,UAAb,CAAwB0D,IAAxB,CAA6B,IAA7B,EAAmC,OAAnC,EAA4C,KAAKnD,aAAjD;;AACA,eAAO,KAAK4D,UAAL,CAAgB,KAAK5D,aAArB,CAAP;AACH;AA5OgB;AAAA;AAAA,aA8OjB,4BAAmB;AACf,YAAI,CAAC,KAAKH,OAAL,CAAarB,QAAlB,EAA4B;AACxB,cAAIqF,IAAI,GAAG,KAAK5B,mBAAL,CAAyBN,IAAzB,CAA8B,+BAA9B,CAAX;;AACA,cAAI,KAAK3B,aAAL,KAAuB,CAA3B,EACI6D,IAAI,CAAClC,IAAL,CAAU,eAAV,EAA2BmC,QAA3B,CAAoC,UAApC,EADJ,KAGID,IAAI,CAAClC,IAAL,CAAU,eAAV,EAA2BoC,WAA3B,CAAuC,UAAvC;AAEJ,cAAI,KAAK/D,aAAL,KAAuB,KAAKqC,cAAL,CAAoBK,MAApB,GAA6B,CAAxD,EACImB,IAAI,CAAClC,IAAL,CAAU,cAAV,EAA0BmC,QAA1B,CAAmC,UAAnC,EADJ,KAGID,IAAI,CAAClC,IAAL,CAAU,cAAV,EAA0BoC,WAA1B,CAAsC,UAAtC;AACP;AACJ;AA3PgB;AAAA;AAAA,aA6PjB,iBAAQ;AACJ,eAAO,KAAKtC,OAAL,CAAaV,KAAb,CAAmB,MAAnB,CAAP;AACH,OA/PgB,CAiQjB;;AAjQiB;AAAA;AAAA,aAkQjB,6BAAoB6B,KAApB,EAA2B;AACvBA,QAAAA,KAAK,GAAGA,KAAK,IAAIS,MAAM,CAACT,KAAxB;AACA,YAAIA,KAAK,CAACoB,OAAN,KAAkB,EAAtB,EACI,OAAO,KAAKjB,aAAL,EAAP;AACJ,YAAIH,KAAK,CAACoB,OAAN,KAAkB,EAAtB,EACI,OAAO,KAAKlB,YAAL,EAAP;AACP,OAxQgB,CA0QjB;;AA1QiB;AAAA;AAAA,aA2QjB,2BAAkBmB,GAAlB,EAAuBxF,IAAvB,EAA6B;AAEzBA,QAAAA,IAAI,GAAGA,IAAI,IAAI,KAAf;AAEA,YAAI,CAACA,IAAD,IAAS,KAAKyF,QAAL,CAAcD,GAAd,CAAb,EACIxF,IAAI,GAAG,OAAP;AACJ,YAAI,CAACA,IAAD,IAAS,KAAK0F,aAAL,CAAmBF,GAAnB,CAAb,EACIxF,IAAI,GAAG,SAAP;AACJ,YAAI,CAACA,IAAD,IAAS,KAAK2F,WAAL,CAAiBH,GAAjB,CAAb,EACIxF,IAAI,GAAG,OAAP;AACJ,YAAI,CAACA,IAAD,IAAS,KAAK4F,eAAL,CAAqBJ,GAArB,CAAb,EACIxF,IAAI,GAAG,WAAP;AACJ,YAAIA,IAAI,IAAI,OAAR,IAAmBA,IAAI,IAAI,OAA3B,IAAuC,CAACA,IAAD,IAAS,KAAK6F,QAAL,CAAcL,GAAd,CAApD,EACIxF,IAAI,GAAG,OAAP;AACJ,YAAI,CAACA,IAAD,IAAS,CAAC,OAAD,EAAU,SAAV,EAAqB,OAArB,EAA8B,WAA9B,EAA2C,OAA3C,EAAoD,KAApD,EAA2D8F,OAA3D,CAAmE9F,IAAnE,IAA2E,CAAxF,EACIA,IAAI,GAAG,KAAP;AAEJ,eAAOA,IAAP;AACH;AA7RgB;AAAA;AAAA,aA+RjB,+BAAsBwF,GAAtB,EAA2B;AACvB,YAAIO,QAAQ,GAAG5G,CAAC,CAAC6G,IAAF,CAAO;AAClBhG,UAAAA,IAAI,EAAE,MADY;AAElBiG,UAAAA,GAAG,EAAET,GAFa;AAGlBU,UAAAA,KAAK,EAAE;AAHW,SAAP,CAAf;AAKA,YAAIC,WAAW,GAAGJ,QAAQ,CAACK,iBAAT,CAA2B,cAA3B,CAAlB;AACA,eAAOD,WAAP;AACH;AAvSgB;AAAA;AAAA,aAySjB,kBAASE,MAAT,EAAiB;AACb,eAAOA,MAAM,IAAIA,MAAM,CAACC,KAAP,CAAa,uEAAb,CAAjB;AACH;AA3SgB;AAAA;AAAA,aA6SjB,kBAASD,MAAT,EAAiB;AACb,eAAOA,MAAM,IAAIA,MAAM,CAACC,KAAP,CAAa,yCAAb,CAAjB;AACH;AA/SgB;AAAA;AAAA,aAiTjB,2BAAkB;AAAA;;AACd;AACA,YAAIC,MAAM,GAAG,KAAK7C,iBAAlB;AACA,YAAI8C,QAAQ,GAAG,KAAK/C,iBAApB;;AAEA,YAAI,KAAKC,iBAAL,CAAuB+C,QAAvB,CAAgC,IAAhC,CAAJ,EAA2C;AACvCF,UAAAA,MAAM,GAAG,KAAK9C,iBAAd;AACA+C,UAAAA,QAAQ,GAAG,KAAK9C,iBAAhB;AACH;;AAED8C,QAAAA,QAAQ,CAAClB,WAAT,CAAqB,SAArB;AACAoB,QAAAA,UAAU,CAAC,YAAM;AACb,cAAI,CAAC,MAAI,CAAChD,iBAAL,CAAuB+C,QAAvB,CAAgC,IAAhC,CAAL,EACI,MAAI,CAAC/C,iBAAL,CAAuBiD,KAAvB;AACJ,cAAI,CAAC,MAAI,CAAClD,iBAAL,CAAuBgD,QAAvB,CAAgC,IAAhC,CAAL,EACI,MAAI,CAAChD,iBAAL,CAAuBkD,KAAvB;AACP,SALS,EAKP,GALO,CAAV;AAOAJ,QAAAA,MAAM,CAAClB,QAAP,CAAgB,SAAhB;AACA,eAAOkB,MAAP;AACH;AArUgB;AAAA;AAAA,aAuUjB,mBAAU;AAEN;AAEA;AACA,aAAKtD,aAAL,CAAmBqC,WAAnB,CAA+B,cAA/B;;AACA,aAAKrC,aAAL,CAAmBqC,WAAnB,CAA+B,aAA/B;;AACA,aAAKrC,aAAL,CAAmBqC,WAAnB,CAA+B,gBAA/B;;AACA,aAAKrC,aAAL,CAAmBqC,WAAnB,CAA+B,SAA/B,EARM,CAUN;;;AAEA,YAAIiB,MAAM,GAAG,KAAKK,eAAL,EAAb;;AACA,aAAKC,qBAAL;;AAEA,YAAIC,aAAa,GAAG,KAAK3E,SAAL,CAAe4E,IAAf,CAAoB,aAApB,KAAsC,KAAK5E,SAAL,CAAe4E,IAAf,CAAoB,MAApB,CAA1D;;AACA,YAAIC,WAAW,GAAG,KAAKC,iBAAL,CAAuBH,aAAvB,EAAsC,KAAK3E,SAAL,CAAe4E,IAAf,CAAoB,WAApB,KAAoC,KAA1E,CAAlB;;AAEA,YAAI,CAAC,OAAD,EAAU,SAAV,EAAqB,OAArB,EAA8B,WAA9B,EAA2C,OAA3C,EAAoD,KAApD,EAA2DjB,OAA3D,CAAmEkB,WAAnE,IAAkF,CAAtF,EACI,OAAO,KAAKE,MAAL,CAAY,KAAK9F,OAAL,CAAab,OAAb,CAAqBP,IAAjC,CAAP;;AAEJ,gBAAQgH,WAAR;AACI,eAAK,OAAL;AACI,gBAAIG,MAAM,GAAG,KAAKhF,SAAL,CAAe4E,IAAf,CAAoB,UAApB,KAAmC,EAAhD;;AACA,iBAAKK,aAAL,CAAmBN,aAAnB,EAAkCK,MAAlC,EAA0CZ,MAA1C;;AACA,iBAAKc,oBAAL,CAA0B,KAAK9F,aAA/B,EAA8C,CAA9C;;AACA;;AACJ,eAAK,SAAL;AACI,iBAAK+F,iBAAL,CAAuBR,aAAvB,EAAsCP,MAAtC;;AACA;;AACJ,eAAK,OAAL;AACI,iBAAKgB,eAAL,CAAqB,KAAK5B,WAAL,CAAiBmB,aAAjB,CAArB,EAAsDP,MAAtD;;AACA;;AACJ,eAAK,WAAL;AACI,iBAAKiB,mBAAL,CAAyB,KAAK5B,eAAL,CAAqBkB,aAArB,CAAzB,EAA8DP,MAA9D;;AACA;;AACJ,eAAK,OAAL;AACI,iBAAKkB,eAAL,CAAqBX,aAArB,EAAoCP,MAApC;;AACA;;AACJ;AAAS;AACL,iBAAKmB,kBAAL,CAAwBZ,aAAxB,EAAuCP,MAAvC;;AACA;AApBR;;AAuBA,eAAO,IAAP;AACH;AApXgB;AAAA;AAAA,aAsXjB,uBAAcF,MAAd,EAAsB;AAClB,YAAI,CAACA,MAAL,EACI,OAAO,KAAP;AACJ,YAAIsB,OAAO,GAAGtB,MAAM,CAACC,KAAP,CAAa,iEAAb,CAAd;AACA,eAAQqB,OAAO,IAAIA,OAAO,CAAC,CAAD,CAAP,CAAW1D,MAAX,KAAsB,EAAlC,GAAwC0D,OAAO,CAAC,CAAD,CAA/C,GAAqD,KAA5D;AACH;AA3XgB;AAAA;AAAA,aA6XjB,qBAAYtB,MAAZ,EAAoB;AAChB,eAAOA,MAAM,IAAIA,MAAM,CAACP,OAAP,CAAe,OAAf,IAA0B,CAApC,GAAwCO,MAAxC,GAAiD,KAAxD;AACH;AA/XgB;AAAA;AAAA,aAiYjB,yBAAgBA,MAAhB,EAAwB;AACpB,eAAOA,MAAM,IAAIA,MAAM,CAACP,OAAP,CAAe,WAAf,IAA8B,CAAxC,GAA4CO,MAA5C,GAAqD,KAA5D;AACH,OAnYgB,CAqYjB;;AArYiB;AAAA;AAAA,aAsYjB,wBAAeuB,IAAf,EAAqB;AACjBA,QAAAA,IAAI,GAAGA,IAAI,IAAI,KAAf;;AACA,YAAIA,IAAJ,EAAU;AACN,eAAK3E,aAAL,CAAmB4E,GAAnB,CAAuB,SAAvB,EAAkC,MAAlC;;AACA,eAAK7E,OAAL,CAAasC,WAAb,CAAyB,SAAzB;;AACAnG,UAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB4D,MAArB,CAA4B,KAAK3B,OAAL,CAAahB,cAAzC;AACH,SAJD,MAKK;AACD,eAAK6C,aAAL,CAAmB4E,GAAnB,CAAuB,SAAvB,EAAkC,KAAKzG,OAAL,CAAajB,mBAAb,GAAmC,MAAnC,GAA4C,OAA9E;;AACA,eAAK6C,OAAL,CAAaqC,QAAb,CAAsB,SAAtB;;AACAlG,UAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB+D,IAArB,CAA0B,uBAA1B,EAAmD2B,MAAnD;AACH;;AACD,eAAO,IAAP;AACH;AAnZgB;AAAA;AAAA,aAqZjB,+BAAsBiD,KAAtB,EAA6BC,MAA7B,EAAqC;AACjC;AACZ;AACA;AACA;AACA;AACY,YAAIC,WAAW,GAAGpD,MAAM,CAACqD,MAAP,CAAcH,KAAhC,CANiC,CAMW;;AAC5C,YAAII,YAAY,GAAGtD,MAAM,CAACqD,MAAP,CAAcF,MAAjC,CAPiC,CAOW;;AAE5C,YAAII,iBAAiB,GAAGnG,IAAI,CAACoG,GAAL,CAASN,KAAT,EAAgBC,MAAhB,CAAxB;AACA,YAAIM,kBAAkB,GAAGrG,IAAI,CAACoG,GAAL,CAASJ,WAAT,EAAsBE,YAAtB,CAAzB;AAEA,eAAOG,kBAAkB,GAAGF,iBAA5B;AACH;AAlagB;AAAA;AAAA,aAoajB,iCAAwB;AACpB,YAAI1I,KAAK,GAAG,KAAK0C,SAAL,CAAewB,IAAf,CAAoB,OAApB,KAAgC,EAA5C;AACA,YAAI2E,OAAO,GAAG,KAAKnG,SAAL,CAAewB,IAAf,CAAoB,QAApB,KAAiC,EAA/C;AAEA,aAAKlC,aAAL,GAAqB,KAArB;;AACA,YAAIhC,KAAK,IAAI,KAAK2B,OAAL,CAAanB,eAA1B,EAA2C;AACvC,eAAKwB,aAAL,GAAqB,IAArB;;AACA,eAAK6B,aAAL,CAAmBuE,GAAnB,CAAuB,SAAvB,EAAkC,EAAlC,EAAsC3E,IAAtC,CAA2C,cAA3C,EAA2DqF,IAA3D,CAAgE9I,KAAK,IAAI,QAAzE;AACH,SAHD,MAKI,KAAK6D,aAAL,CAAmBuE,GAAnB,CAAuB,SAAvB,EAAkC,MAAlC;;AAEJ,aAAKnG,cAAL,GAAsB,KAAtB;;AACA,YAAI4G,OAAJ,EAAa;AACT,eAAK5G,cAAL,GAAsB,IAAtB;;AACA,eAAK6B,aAAL,CAAmBsE,GAAnB,CAAuB,SAAvB,EAAkC,EAAlC,EAAsCU,IAAtC,CAA2CD,OAA3C;AACH,SAHD,MAKI,KAAK/E,aAAL,CAAmBsE,GAAnB,CAAuB,SAAvB,EAAkC,MAAlC;;AAEJ,eAAO,IAAP;AACH;AAzbgB;AAAA;AAAA,aA2bjB,2BAAkBW,MAAlB,EAA0BC,oBAA1B,EAAgD;AAC5C,YAAIC,EAAE,GAAG,KAAKhD,aAAL,CAAmB8C,MAAnB,CAAT;;AACA,YAAIG,KAAK,GAAGH,MAAM,CAAC1C,OAAP,CAAe,GAAf,IAAsB,CAAtB,GAA0B0C,MAAM,CAACI,MAAP,CAAcJ,MAAM,CAAC1C,OAAP,CAAe,GAAf,CAAd,CAA1B,GAA+D,EAA3E;AACA,YAAIgC,KAAK,GAAG,KAAK3F,SAAL,CAAewB,IAAf,CAAoB,OAApB,KAAgC,GAA5C;AACA,YAAIoE,MAAM,GAAG,KAAK5F,SAAL,CAAewB,IAAf,CAAoB,QAApB,KAAiCmE,KAAK,IAAI,MAAM,GAAV,CAAnD;AACA,eAAO,KAAKe,gBAAL,mCACwBH,EADxB,wCACwDC,KADxD,GAEHb,KAFG,EAGHC,MAHG,EAIHU,oBAJG,CAAP;AAMH;AAtcgB;AAAA;AAAA,aAwcjB,yBAAgBC,EAAhB,EAAoBD,oBAApB,EAA0C;AACtC,YAAIX,KAAK,GAAG,KAAK3F,SAAL,CAAewB,IAAf,CAAoB,OAApB,KAAgC,GAA5C;AACA,YAAIoE,MAAM,GAAG,KAAK5F,SAAL,CAAewB,IAAf,CAAoB,QAApB,KAAiCmE,KAAK,IAAI,MAAM,GAAV,CAAnD;AACA,eAAO,KAAKe,gBAAL,CAAsBH,EAAE,GAAG,aAA3B,EAA0CZ,KAA1C,EAAiDC,MAAjD,EAAyDU,oBAAzD,CAAP;AACH;AA5cgB;AAAA;AAAA,aA8cjB,6BAAoBC,EAApB,EAAwBD,oBAAxB,EAA8C;AAC1C;AACA,YAAIX,KAAK,GAAG,KAAK3F,SAAL,CAAewB,IAAf,CAAoB,OAApB,KAAgC,GAA5C;AACA,YAAIoE,MAAM,GAAGD,KAAK,GAAG,EAArB;AACAY,QAAAA,EAAE,GAAGA,EAAE,CAACE,MAAH,CAAU,CAAC,CAAX,MAAkB,GAAlB,GAAwBF,EAAE,GAAG,GAA7B,GAAmCA,EAAxC,CAJ0C,CAIE;;AAC5CD,QAAAA,oBAAoB,CAACF,IAArB,2BAA4CT,KAA5C,yBAA8DC,MAA9D,sBAA8EW,EAA9E;;AACA,aAAK5D,OAAL,CAAagD,KAAb,EAAoBC,MAApB;;AACA,aAAK3G,OAAL,CAAaH,eAAb,CAA6ByD,IAA7B,CAAkC,IAAlC;;AACA,YAAI,KAAKpD,aAAL,IAAsB,KAAKF,OAAL,CAAatB,iBAAvC,EAA0D;AACtD,eAAKwB,aAAL,CAAmBuG,GAAnB,CAAuB,SAAvB,EAAkC,MAAlC;;AACJ,aAAK5E,aAAL,CAAmBoC,QAAnB,CAA4B,SAA5B;;AACA,aAAKb,cAAL,CAAoB,KAApB;;AACA,eAAO,IAAP;AACH;AA3dgB;AAAA;AAAA,aA6djB,0BAAiByB,GAAjB,EAAsB6B,KAAtB,EAA6BC,MAA7B,EAAqCU,oBAArC,EAA2D;AAAE;AACzDV,QAAAA,MAAM,GAAGA,MAAM,IAAID,KAAnB,CADuD,CAC7B;AAE1B;;AACA,YAAIgB,aAAa,GAAG,KAAKC,qBAAL,CAA2BjB,KAA3B,EAAkCC,MAAlC,CAApB;;AACAD,QAAAA,KAAK,GAAGA,KAAK,GAAGgB,aAAhB;AACAf,QAAAA,MAAM,GAAGA,MAAM,GAAGe,aAAlB,CANuD,CAOvD;;AAEAL,QAAAA,oBAAoB,CAACF,IAArB,kFAAiGT,KAAjG,yBAAmHC,MAAnH,sBAAmI9B,GAAnI;;AACA,aAAKnB,OAAL,CAAagD,KAAb,EAAoBC,MAApB;;AACA,aAAK3G,OAAL,CAAaH,eAAb,CAA6ByD,IAA7B,CAAkC,IAAlC;;AACA,YAAI,KAAKpD,aAAL,IAAsB,KAAKF,OAAL,CAAatB,iBAAvC,EACI,KAAKwB,aAAL,CAAmBuG,GAAnB,CAAuB,SAAvB,EAAkC,MAAlC,EAbmD,CAaR;;AAC/C,aAAK5E,aAAL,CAAmBoC,QAAnB,CAA4B,SAA5B;;AACA,aAAKb,cAAL,CAAoB,KAApB;;AACA,eAAO,IAAP;AACH;AA9egB;AAAA;AAAA,aAgfjB,yBAAgByB,GAAhB,EAAqBwC,oBAArB,EAA2C;AAAE;AACzC,YAAItC,WAAW,GAAG,KAAK6C,qBAAL,CAA2B/C,GAA3B,CAAlB;;AACA,YAAI,CAACE,WAAL,EAAkB;AACd,iBAAO,KAAKe,MAAL,CAAY,KAAK9F,OAAL,CAAab,OAAb,CAAqBP,IAAjC,CAAP;AACH;;AACD,YAAIiJ,SAAS,GAAG,EAAhB;;AACA,YAAI9C,WAAW,CAACL,OAAZ,CAAoB,OAApB,IAA+B,CAAnC,EAAsC;AAClCmD,UAAAA,SAAS,GAAG,OAAZ;AACH,SAFD,MAEO;AACHA,UAAAA,SAAS,GAAG,OAAZ;AACH;;AACD,YAAInB,KAAK,GAAG,KAAK3F,SAAL,CAAewB,IAAf,CAAoB,OAApB,KAAgC,GAA5C;AACA,YAAIoE,MAAM,GAAG,KAAK5F,SAAL,CAAewB,IAAf,CAAoB,QAApB,KAAiCmE,KAAK,IAAI,MAAM,GAAV,CAAnD,CAZuC,CAcvC;;AACA,YAAIgB,aAAa,GAAG,KAAKC,qBAAL,CAA2BjB,KAA3B,EAAkCC,MAAlC,CAApB;;AACAD,QAAAA,KAAK,GAAGA,KAAK,GAAGgB,aAAhB;AACAf,QAAAA,MAAM,GAAGA,MAAM,GAAGe,aAAlB,CAjBuC,CAkBvC;;AAEAL,QAAAA,oBAAoB,CAACF,IAArB,mEAAmFU,SAAnF,sBAAuGnB,KAAvG,yBAAyHC,MAAzH,iGAAgN9B,GAAhN,uBAA8NE,WAA9N,gBAA8O,KAAK/E,OAAL,CAAab,OAAb,CAAqBP,IAAnQ,eAA4QiJ,SAA5Q;;AACA,aAAKnE,OAAL,CAAagD,KAAb,EAAoBC,MAApB;;AACA,aAAK3G,OAAL,CAAaH,eAAb,CAA6ByD,IAA7B,CAAkC,IAAlC;;AACA,YAAI,KAAKpD,aAAL,IAAsB,KAAKF,OAAL,CAAatB,iBAAvC,EACI,KAAKwB,aAAL,CAAmBuG,GAAnB,CAAuB,SAAvB,EAAkC,MAAlC,EAxBmC,CAwBQ;;AAC/C,aAAK5E,aAAL,CAAmBoC,QAAnB,CAA4B,SAA5B;;AACA,aAAKb,cAAL,CAAoB,KAApB;;AACA,eAAO,IAAP;AACH;AA5gBgB;AAAA;AAAA,aA8gBjB,4BAAmByB,GAAnB,EAAwBwC,oBAAxB,EAA8C;AAAA;;AAC1C,YAAIX,KAAK,GAAG,KAAK3F,SAAL,CAAewB,IAAf,CAAoB,OAApB,KAAgC,GAA5C;AACA,YAAIoE,MAAM,GAAG,KAAK5F,SAAL,CAAewB,IAAf,CAAoB,QAApB,KAAiC,GAA9C;AAEA,YAAIuF,oBAAoB,GAAG,KAAK/G,SAAL,CAAewB,IAAf,CAAoB,sBAApB,KAA+C,KAA1E;;AACA,aAAKa,cAAL,CAAoB,KAApB,EAL0C,CAO1C;;;AACA,YAAIsE,aAAa,GAAG,KAAKC,qBAAL,CAA2BjB,KAA3B,EAAkCC,MAAlC,CAApB;;AACAD,QAAAA,KAAK,GAAGA,KAAK,GAAGgB,aAAhB;AACAf,QAAAA,MAAM,GAAGA,MAAM,GAAGe,aAAlB,CAV0C,CAW1C;AAEA;AACA;;AACA,YAAI,CAACI,oBAAD,IAAyB,CAAC,KAAKC,WAAL,CAAiBlD,GAAjB,CAA9B,EAAqD;AACjDwC,UAAAA,oBAAoB,CAACW,IAArB,CAA0BnD,GAA1B,EAA+B9G,CAAC,CAACkK,KAAF,CAAQ,YAAM;AACzC,mBAAO,MAAI,CAAClH,SAAL,CAAemH,OAAf,CAAuB,iBAAvB,CAAP;AACH,WAF8B,CAA/B;AAIH,SALD,MAKO;AACHb,UAAAA,oBAAoB,CAACF,IAArB,yBAA0CtC,GAA1C;;AACA,eAAK7E,OAAL,CAAaH,eAAb,CAA6ByD,IAA7B,CAAkC,IAAlC;AACH;;AAED,YAAI,KAAKpD,aAAT,EAAwB;AACpB,eAAKA,aAAL,CAAmBuG,GAAnB,CAAuB,SAAvB,EAAkC,MAAlC;;AACJ,aAAK5E,aAAL,CAAmBoC,QAAnB,CAA4B,SAA5B;;AAEA,aAAKP,OAAL,CAAagD,KAAb,EAAoBC,MAApB;;AACA,eAAO,IAAP;AACH;AA7iBgB;AAAA;AAAA,aA+iBjB,qBAAY9B,GAAZ,EAAiB;AACb,YAAIK,KAAK,GAAGL,GAAG,CAACK,KAAJ,CAAU,4DAAV,CAAZ;AACA,YAAI,OAAOA,KAAK,CAAC,CAAD,CAAZ,KAAoB,QAApB,IAAgCA,KAAK,CAAC,CAAD,CAAL,CAASrC,MAAT,GAAkB,CAAlD,IAAuDqC,KAAK,CAAC,CAAD,CAAL,CAASiD,WAAT,OAA2BC,QAAQ,CAACC,QAA/F,EACI,OAAO,IAAP;AAEJ,YAAI,OAAOnD,KAAK,CAAC,CAAD,CAAZ,KAAoB,QAApB,IAAgCA,KAAK,CAAC,CAAD,CAAL,CAASrC,MAAT,GAAkB,CAAlD,IAAuDqC,KAAK,CAAC,CAAD,CAAL,CAASoD,OAAT,CAAiB,IAAIC,MAAJ,aAAgB;AACxF,mBAAS,EAD+E;AAExF,oBAAU;AAF8E,UAG1FH,QAAQ,CAACC,QAHiF,CAAhB,SAAjB,EAG/B,EAH+B,MAGvBD,QAAQ,CAACI,IAH7C,EAII,OAAO,IAAP;AAEJ,eAAO,KAAP;AACH;AA3jBgB;AAAA;AAAA,aA6jBjB,gBAAOC,OAAP,EAAgB;AACZC,QAAAA,OAAO,CAACC,KAAR,CAAcF,OAAd;;AACA,aAAKjD,eAAL,GAAuB2B,IAAvB,CAA4BsB,OAA5B;;AACA,aAAK/E,OAAL,CAAa,GAAb,EAAkB,GAAlB;;AACA,eAAO,IAAP;AACH;AAlkBgB;AAAA;AAAA,aAokBjB,8BAAqBkF,UAArB,EAAiCC,aAAjC,EAAgD;AAE5C,YAAI,CAAC,KAAKrG,cAAV,EACI;AAEJ,YAAIsG,IAAI,GAAG/K,CAAC,CAAC,KAAKyE,cAAL,CAAoBsB,GAApB,CAAwB8E,UAAxB,CAAD,EAAsC,KAAtC,CAAZ;AACA,YAAI,OAAOE,IAAP,IAAe,WAAnB,EACI;AAEJ,YAAI1E,GAAG,GAAG0E,IAAI,CAACnD,IAAL,CAAU,aAAV,KAA4BmD,IAAI,CAACnD,IAAL,CAAU,MAAV,CAAtC;AACA,YAAImD,IAAI,CAACnD,IAAL,CAAU,WAAV,MAA2B,OAA3B,IAAsC,KAAKtB,QAAL,CAAcD,GAAd,CAA1C,EACI,KAAK4B,aAAL,CAAmB5B,GAAnB,EAAwB,EAAxB,EAA4B,KAA5B;AAEJ,YAAIyE,aAAa,GAAG,CAApB,EACI,OAAO,KAAK5C,oBAAL,CAA0B2C,UAAU,GAAG,CAAvC,EAA0CC,aAAa,GAAG,CAA1D,CAAP;AACP;AAnlBgB;AAAA;AAAA,aAqlBjB,uBAAczE,GAAd,EAAmB2B,MAAnB,EAA2BgD,kBAA3B,EAA+C;AAAA;;AAE3CA,QAAAA,kBAAkB,GAAGA,kBAAkB,IAAI,KAA3C;AAEA,YAAIC,GAAG,GAAG,IAAIC,KAAJ,EAAV;AACA,YAAIC,cAAc,GAAG,IAArB;;AACA,YAAIH,kBAAJ,EAAwB;AACpB;AACAG,UAAAA,cAAc,GAAG5D,UAAU,CAAC,YAAM;AAC9ByD,YAAAA,kBAAkB,CAACpH,MAAnB,CAA0B,MAAI,CAAC3B,OAAL,CAAahB,cAAvC;AACH,WAF0B,EAExB,GAFwB,CAA3B;AAGH;;AAEDgK,QAAAA,GAAG,CAACG,MAAJ,GAAa,YAAM;AACf,cAAID,cAAJ,EACIE,YAAY,CAACF,cAAD,CAAZ;AACJA,UAAAA,cAAc,GAAG,IAAjB;AACA,cAAIG,KAAK,GAAGtL,CAAC,CAAC,SAAD,CAAb;AACAsL,UAAAA,KAAK,CAAC1D,IAAN,CAAW,KAAX,EAAkBqD,GAAG,CAAC5E,GAAtB;AACAiF,UAAAA,KAAK,CAAC1D,IAAN,CAAW,KAAX,EAAkBI,MAAlB;AACAsD,UAAAA,KAAK,CAACpF,QAAN,CAAe,WAAf,EAPe,CASf;;AACAoF,UAAAA,KAAK,CAAC5C,GAAN,CAAU,OAAV,EAAmB,iBAAnB;;AAEA,cAAIsC,kBAAJ,EAAwB;AAEpBA,YAAAA,kBAAkB,CAAC5B,IAAnB,CAAwBkC,KAAxB;AAEA,gBAAI,MAAI,CAACnJ,aAAT,EACI,MAAI,CAACA,aAAL,CAAmBuG,GAAnB,CAAuB,SAAvB,EAAkC,EAAlC,EALgB,CAKsB;;AAE1C;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEoB,YAAA,MAAI,CAAC5E,aAAL,CAAmB4E,GAAnB,CAAuB,SAAvB,EAAkC,MAAI,CAACzG,OAAL,CAAajB,mBAAb,GAAmC,MAAnC,GAA4C,OAA9E;;AAEA,YAAA,MAAI,CAAC8C,aAAL,CAAmBoC,QAAnB,CAA4B,cAA5B,EA3BoB,CA4BpB;;;AAEA,gBAAIqF,WAAW,GAAG,CAAlB;AACA,gBAAIC,YAAY,GAAG,CAAnB,CA/BoB,CAiCpB;;AACA,gBAAIC,UAAU,GAAGH,KAAK,CAAC,CAAD,CAAL,CAAS3C,KAA1B;AACA,gBAAI+C,WAAW,GAAGJ,KAAK,CAAC,CAAD,CAAL,CAAS1C,MAA3B,CAnCoB,CAqCpB;;AACA,gBAAI+C,QAAQ,GAAGV,GAAG,CAACtC,KAAnB;AACA,gBAAIiD,SAAS,GAAGX,GAAG,CAACrC,MAApB;;AAEA,gBAAI6C,UAAU,GAAG,CAAb,IAAkBC,WAAW,GAAG,CAApC,EAAuC;AACnCH,cAAAA,WAAW,GAAGE,UAAd;AACAD,cAAAA,YAAY,GAAGE,WAAf;AACH,aAHD,MAIK,IAAIC,QAAQ,GAAG,CAAX,IAAgBC,SAAS,GAAG,CAAhC,EAAmC;AACpCL,cAAAA,WAAW,GAAGI,QAAd;AACAH,cAAAA,YAAY,GAAGI,SAAf;AACH;;AAED,YAAA,MAAI,CAAC9H,aAAL,CAAmBqC,WAAnB,CAA+B,cAA/B,EAlDoB,CAmDpB;;;AAEA,gBAAIoF,WAAW,GAAG,CAAd,IAAmBC,YAAY,GAAG,CAAtC,EAAyC;AACrC;AACA,kBAAI,MAAI,CAACvJ,OAAL,CAAa5B,KAAjB,EAAwBwL,KAAK,CACzB,iBAAiBJ,UAAjB,GAA8B,OAA9B,GACA,eADA,GACkBC,WADlB,GACgC,OADhC,GAEA,YAFA,GAEeC,QAFf,GAE0B,OAF1B,GAGA,aAHA,GAGgBC,SAHhB,GAG4B,GAJH,CAAL;;AAMxB,cAAA,MAAI,CAACjG,OAAL,CAAa4F,WAAb,EAA0BC,YAA1B;AACH,aATD,MAUK;AACD;AACA,cAAA,MAAI,CAAC1H,aAAL,CAAmBoC,QAAnB,CAA4B,gBAA5B;;AACA,kBAAI,MAAI,CAACjE,OAAL,CAAa5B,KAAjB,EAAwBwL,KAAK,CAAC,gBAAD,CAAL;AAC3B;;AAED,YAAA,MAAI,CAAC/H,aAAL,CAAmBoC,QAAnB,CAA4B,aAA5B;;AAEA,YAAA,MAAI,CAACb,cAAL,CAAoB,KAApB;;AACA,mBAAO,MAAI,CAACpD,OAAL,CAAaH,eAAb,CAA6ByD,IAA7B,CAAkC,MAAlC,CAAP;AACH;AACJ,SAtFD;;AAwFA,YAAIyF,kBAAJ,EAAwB;AACpBC,UAAAA,GAAG,CAACa,OAAJ,GAAc,YAAM;AAChB,YAAA,MAAI,CAACzG,cAAL,CAAoB,KAApB;;AACA,mBAAO,MAAI,CAAC0C,MAAL,CAAY,MAAI,CAAC9F,OAAL,CAAab,OAAb,CAAqBE,IAArB,eAAiC+E,GAAjC,CAAZ,CAAP;AACH,WAHD;AAIH;;AAED4E,QAAAA,GAAG,CAAC5E,GAAJ,GAAUA,GAAV;AACA,eAAO4E,GAAP;AACH;AAnsBgB;AAAA;AAAA,aAqsBjB,wBAAe;AACX,YAAI,KAAKtI,UAAL,GAAkB,KAAKD,YAA3B,EAAyC;AACrC,iBAAO,KAAKyC,aAAL,EAAP;AACH;;AACD,YAAI,KAAKxC,UAAL,GAAkB,KAAKD,YAA3B,EAAyC;AACrC,iBAAO,KAAKwC,YAAL,EAAP;AACH;AACJ;AA5sBgB;AAAA;AAAA,aA8sBjB,iBAAQyD,KAAR,EAAeC,MAAf,EAAuB;AAEnBA,QAAAA,MAAM,GAAGA,MAAM,IAAID,KAAnB;;AAEA,YAAIgB,aAAa,GAAG,KAAKC,qBAAL,CAA2BjB,KAA3B,EAAkCC,MAAlC,CAApB;;AACAD,QAAAA,KAAK,GAAGA,KAAK,GAAGgB,aAAhB;AACAf,QAAAA,MAAM,GAAGA,MAAM,GAAGe,aAAlB;AAEA,aAAKnH,YAAL,GAAoBmG,KAApB;AACA,aAAKlG,aAAL,GAAqBmG,MAArB;AAEA,YAAI,KAAK3G,OAAL,CAAa5B,KAAjB,EAAwBwL,KAAK,CAAC,mBAAmB,KAAKrJ,YAAxB,GAAuC,mBAAvC,GAA6D,KAAKC,aAAnE,CAAL;AAExB,YAAIsJ,eAAe,GAAGpD,KAAK,GAAGC,MAA9B;;AAEA,aAAK9E,aAAL,CAAmBoC,QAAnB,CAA4B,cAA5B,EAfmB,CAgBnB;;;AAEA,YAAI8F,qCAAqC,GAAG,KAAKlI,aAAL,CAAmBmI,UAAnB,CAA8B,KAA9B,CAA5C;;AACA,YAAIC,6BAA6B,GAAG,KAAK7H,mBAAL,CAAyB8H,UAAzB,EAApC;;AAEA,YAAIC,sCAAsC,GAAG,KAAKtI,aAAL,CAAmBuI,WAAnB,CAA+B,KAA/B,CAA7C;;AACA,YAAIC,sCAAsC,GAAG,KAAKxI,aAAL,CAAmBuI,WAAnB,CAA+B,IAA/B,CAA7C;;AACA,YAAIE,8BAA8B,GAAG,KAAKlI,mBAAL,CAAyBmI,WAAzB,EAArC;;AAEA,aAAK1I,aAAL,CAAmBqC,WAAnB,CAA+B,cAA/B,EAzBmB,CA2BnB;;;AACA,YAAIsG,iBAAiB,GAAGT,qCAAqC,GAAGE,6BAAhE,CA5BmB,CA8BnB;;AACA,YAAIQ,kBAAkB,GAAGN,sCAAsC,GAAGG,8BAAlE;AACA,YAAII,kBAAkB,GAAGL,sCAAsC,GAAGC,8BAAlE;AAEA,YAAI/L,QAAQ,GAAGqC,IAAI,CAAC+J,GAAL,CAASZ,qCAAT,EAAgD,KAAK/J,OAAL,CAAaV,GAAb,CAAiBmC,IAAjB,CAAsB6H,WAAtE,EAAmF,KAAKtJ,OAAL,CAAazB,QAAhG,CAAf,CAlCmB,CAoCnB;;AAEA,YAAKmI,KAAK,GAAG8D,iBAAT,GAA8BjM,QAAlC,EAA4C;AACxCoI,UAAAA,MAAM,GAAG,CAACpI,QAAQ,GAAGiM,iBAAZ,IAAiCV,eAA1C;AACApD,UAAAA,KAAK,GAAGnI,QAAR;AACH,SAHD,MAIImI,KAAK,GAAIA,KAAK,GAAG8D,iBAAjB;;AAEJ,YAAII,YAAY,GAAG,CAAnB;AAAA,YACIC,YAAY,GAAG,CADnB,CA5CmB,CA+CnB;AACA;;AACA,YAAI,KAAKvK,cAAT,EACIuK,YAAY,GAAG,KAAK1I,aAAL,CAAmBiI,WAAnB,CAA+B,IAA/B,KAAwC,EAAvD;AAEJ,YAAI,KAAK/J,aAAT,EACIuK,YAAY,GAAG,KAAK1I,aAAL,CAAmBkI,WAAnB,CAA+B,IAA/B,KAAwC,EAAvD;AAEJ,YAAI5L,SAAS,GAAGoC,IAAI,CAAC+J,GAAL,CAAShE,MAAT,EAAiBnD,MAAM,CAAC+G,WAAP,GAAqBG,kBAArB,GAA0CE,YAA1C,GAAyDC,YAA1E,EAAwF,KAAK7K,OAAL,CAAaxB,SAAb,GAAyBiM,kBAAzB,GAA8CG,YAA9C,GAA6DC,YAArJ,CAAhB;;AAEA,YAAIlE,MAAM,GAAGnI,SAAb,EAAwB;AACpB;AACAkI,UAAAA,KAAK,GAAG9F,IAAI,CAACkK,IAAL,CAAUtM,SAAS,GAAGsL,eAAtB,IAAyCU,iBAAjD;AACH;;AAED,aAAKpI,mBAAL,CAAyBqE,GAAzB,CAA6B,QAA7B,EAAuCjI,SAAvC;;AACA,aAAKqD,aAAL,CAAmB4E,GAAnB,CAAuB,MAAvB,EAA+B,GAA/B,EAAoCA,GAApC,CAAwC,UAAxC,EAAoDC,KAApD;;AAEA,YAAI,KAAK1G,OAAL,CAAa5B,KAAjB,EAAwB;AACpB,cAAIqK,OAAO,GAAG,mBAAmB1K,CAAC,CAACyF,MAAD,CAAD,CAAUkD,KAAV,EAAnB,GACR,oBADQ,GACe3I,CAAC,CAACyF,MAAD,CAAD,CAAUmD,MAAV,EADf,GAER,0BAFQ,GAEqBnD,MAAM,CAACqD,MAAP,CAAcH,KAFnC,GAGR,2BAHQ,GAGsBlD,MAAM,CAACqD,MAAP,CAAcF,MAHpC,GAIR,yBAJQ,GAIoBnD,MAAM,CAAC0G,UAJ3B,GAKR,0BALQ,GAKqB1G,MAAM,CAAC+G,WAL5B,GAMR,iBANQ,GAMY/L,SAN1B;AAQA,eAAK0B,aAAL,CAAmB,CAAnB,EAAsB6K,UAAtB,CAAiC,CAAjC,EAAoCC,SAApC,GAAgDvC,OAAhD;AACH;;AAED,YAAIvH,KAAK,GAAG,KAAKU,OAAL,CAAaW,IAAb,CAAkB,UAAlB,CAAZ;;AACA,YAAIrB,KAAJ,EAAW;AACP;AACA,cAAI;AACAA,YAAAA,KAAK,CAAC+J,aAAN;AACH,WAFD,CAEE,OAAOC,SAAP,EAAkB;AAChBhK,YAAAA,KAAK,CAACiK,YAAN;AACH;AACJ;;AACD,eAAO,IAAP;AACH;AAryBgB;AAAA;AAAA;AAoDjB;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAOQ,qBAAqB;AACjB,eAAOhN,OAAP;AACH;AA/EgB;AAAA;AAAA,aAuyBjB,0BAAwB4B,MAAxB,EAAgC;AAAA;;AAC5BA,QAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;AACA,eAAO,KAAKqL,IAAL,CAAU,YAAM;AACnB,cAAIC,KAAK,GAAGtN,CAAC,CAAC,MAAD,CAAb;;AACA,cAAIiC,OAAO,GAAGjC,CAAC,CAACkC,MAAF,CACV,EADU,EAEVnC,QAAQ,CAACK,OAFC,EAGVkN,KAAK,CAAC9I,IAAN,EAHU,EAIV,QAAOxC,MAAP,MAAkB,QAAlB,IAA8BA,MAJpB,CAAd;;AAOA,cAAIjC,QAAJ,CAAa,MAAb,EAAmBkC,OAAnB;AACH,SAVM,CAAP;AAWH;AApzBgB;;AAAA;AAAA;;AAyzBrBjC,EAAAA,CAAC,CAACG,EAAF,CAAKF,IAAL,IAAaF,QAAQ,CAACwN,gBAAtB;AACAvN,EAAAA,CAAC,CAACG,EAAF,CAAKF,IAAL,EAAWmD,WAAX,GAAyBrD,QAAzB;;AACAC,EAAAA,CAAC,CAACG,EAAF,CAAKF,IAAL,EAAWuN,UAAX,GAAwB,YAAM;AAC1BxN,IAAAA,CAAC,CAACG,EAAF,CAAKF,IAAL,IAAaC,kBAAb;AACA,WAAOH,QAAQ,CAACwN,gBAAhB;AACH,GAHD;;AAKA,SAAOxN,QAAP;AAEH,CAl0BgB,CAk0BdkD,MAl0Bc,CAAjB;;eAo0BelD,Q","sourcesContent":["const Lightbox = (($) => {\r\n\r\n    /* Added in v.5.5.0-dhymik:\r\n     * (search for \"added by DhyMik\")\r\n     * \r\n     * 1. auto max data dimensions to max screen dimensions\r\n     * \r\n     *    This solves issues with svg displayed too small\r\n     *    and images / video frames not filling the screen\r\n     * \r\n     * 2. skip resizing and adding inline size styles when\r\n     *    'lightboxFullSize' css class is added to the lighbox <a> tag\r\n     *    \r\n     *    Use this if\r\n     */\r\n\r\n\r\n    const NAME = 'ekkoLightbox'\r\n    const JQUERY_NO_CONFLICT = $.fn[NAME]\r\n\r\n    const Default = {\r\n        debug: false,\r\n        title: '',\r\n        footer: '',\r\n        maxWidth: 9999,\r\n        maxHeight: 9999,\r\n        showArrows: true, //display the left / right arrows or not\r\n        hideArrowsOnVideo: false, //hide the left / right arrows for videos\r\n        wrapping: true, //if true, gallery loops infinitely\r\n        type: null, //force the lightbox into image / youtube mode. if null, or not image|youtube|vimeo; detect it\r\n        alwaysShowClose: false, //always show the close button, even if there is no title\r\n        fade: true, // fade in or not\r\n        verticalAlignCenter: false, // vertically centered modal\r\n        loadingMessage: '<div class=\"ekko-lightbox-loader\"><div><div></div><div></div></div></div>', // http://tobiasahlin.com/spinkit/\r\n        leftArrow: '<span>&#10094;</span>',\r\n        rightArrow: '<span>&#10095;</span>',\r\n        strings: {\r\n            close: 'Close',\r\n            fail: 'Failed to load image:',\r\n            type: 'Could not detect remote target type. Force the type using data-type',\r\n        },\r\n        doc: document, // if in an iframe can specify top.document\r\n        onShow() { },\r\n        onShown() { },\r\n        onHide() { },\r\n        onHidden() { },\r\n        onNavigate() { },\r\n        onContentLoaded() { },\r\n    }\r\n\r\n    class Lightbox {\r\n\r\n        /**\r\n\r\n        Class properties:\r\n\r\n         _$element: null -> the <a> element currently being displayed\r\n         _$modal: The bootstrap modal generated\r\n            _$modalDialog: The .modal-dialog\r\n            _$modalContent: The .modal-content\r\n            _$modalBody: The .modal-body\r\n            _$modalHeader: The .modal-header\r\n            _$modalFooter: The .modal-footer\r\n         _$lightboxContainerOne: Container of the first lightbox element\r\n         _$lightboxContainerTwo: Container of the second lightbox element\r\n         _$lightboxBody: First element in the container\r\n         _$modalArrows: The overlayed arrows container\r\n\r\n         _$galleryItems: Other <a>'s available for this gallery\r\n         _galleryName: Name of the current data('gallery') showing\r\n         _galleryIndex: The current index of the _$galleryItems being shown\r\n\r\n         _config: {} the options for the modal\r\n         _modalId: unique id for the current lightbox\r\n\r\n         */\r\n\r\n        static get Default() {\r\n            return Default\r\n        }\r\n\r\n        constructor($element, config) {\r\n            this._config = $.extend({}, Default, config)\r\n            this._$modalArrows = null\r\n            this._galleryIndex = 0\r\n            this._galleryName = null\r\n            this._titleIsShown = false\r\n            this._footerIsShown = false\r\n            this._wantedWidth = 0\r\n            this._wantedHeight = 0\r\n            this._touchstartX = 0\r\n            this._touchendX = 0\r\n\r\n            this._modalId = `ekkoLightbox-${Math.floor((Math.random() * 1000) + 1)}`;\r\n            this._$element = $element instanceof jQuery ? $element : $($element)\r\n\r\n            this._isBootstrap3 = $.fn.modal.Constructor.VERSION[0] == 3;\r\n\r\n            let h4 = `<h4 class=\"modal-title\">${this._config.title || \"&nbsp;\"}</h4>`;\r\n            let btn = `<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"${this._config.strings.close}\"><span aria-hidden=\"true\">&times;</span></button>`;\r\n\r\n            let fade = this._config.fade ? 'fade in' : '';\r\n            let vertical = this._config.verticalAlignCenter ? 'modal-dialog-centered' : '';\r\n\r\n            let header = `<div class=\"modal-header${this._config.title || this._config.alwaysShowClose ? '' : ' hide'}\">` + (this._isBootstrap3 ? btn + h4 : h4 + btn) + `</div>`;\r\n            let footer = `<div class=\"modal-footer${this._config.footer ? '' : ' hide'}\">${this._config.footer || \"&nbsp;\"}</div>`;\r\n            let body = `<div class=\"modal-body\"><div class=\"ekko-lightbox-container\"><div class=\"ekko-lightbox-item ${fade} show\"></div><div class=\"ekko-lightbox-item fade\"></div></div></div>`;\r\n            let dialog = `<div class=\"modal-dialog ${vertical}\" role=\"document\"><div class=\"modal-content\">${header}${body}${footer}</div></div>`;\r\n            $(this._config.doc.body).append(`<div id=\"${this._modalId}\" class=\"ekko-lightbox modal fade\" tabindex=\"-1\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">${dialog}</div>`)\r\n\r\n            this._$modal = $(`#${this._modalId}`, this._config.doc)\r\n            this._$modalDialog = this._$modal.find('.modal-dialog').first()\r\n            this._$modalContent = this._$modal.find('.modal-content').first()\r\n            this._$modalBody = this._$modal.find('.modal-body').first()\r\n            this._$modalHeader = this._$modal.find('.modal-header').first()\r\n            this._$modalFooter = this._$modal.find('.modal-footer').first()\r\n\r\n            this._$lightboxContainer = this._$modalBody.find('.ekko-lightbox-container').first()\r\n            this._$lightboxBodyOne = this._$lightboxContainer.find('> div:first-child').first()\r\n            this._$lightboxBodyTwo = this._$lightboxContainer.find('> div:last-child').first()\r\n\r\n            this._galleryName = this._$element.data('gallery')\r\n            if (this._galleryName) {\r\n                this._$galleryItems = $(document.body).find(`*[data-gallery=\"${this._galleryName}\"]`)\r\n                this._galleryIndex = this._$galleryItems.index(this._$element)\r\n                $(document).on('keydown.ekkoLightbox', this._navigationalBinder.bind(this))\r\n\r\n                // add the directional arrows to the modal\r\n                if (this._config.showArrows && this._$galleryItems.length > 1) {\r\n                    this._$lightboxContainer.prepend(`<div class=\"ekko-lightbox-nav-overlay\"><a href=\"#\">${this._config.leftArrow}</a><a href=\"#\">${this._config.rightArrow}</a></div>`)\r\n                    this._$modalArrows = this._$lightboxContainer.find('div.ekko-lightbox-nav-overlay').first()\r\n                    this._$lightboxContainer.on('click', 'a:first-child', event => {\r\n                        event.preventDefault()\r\n                        return this.navigateLeft()\r\n                    })\r\n                    this._$lightboxContainer.on('click', 'a:last-child', event => {\r\n                        event.preventDefault()\r\n                        return this.navigateRight()\r\n                    })\r\n                    this.updateNavigation()\r\n                }\r\n            }\r\n\r\n            this._$modal\r\n                .on('show.bs.modal', this._config.onShow.bind(this))\r\n                .on('shown.bs.modal', () => {\r\n                    this._toggleLoading(true)\r\n                    this._handle()\r\n                    return this._config.onShown.call(this)\r\n                })\r\n                .on('hide.bs.modal', this._config.onHide.bind(this))\r\n                .on('hidden.bs.modal', () => {\r\n                    if (this._galleryName) {\r\n                        $(document).off('keydown.ekkoLightbox')\r\n                        $(window).off('resize.ekkoLightbox')\r\n                    }\r\n                    this._$modal.remove()\r\n                    return this._config.onHidden.call(this)\r\n                })\r\n                .modal(this._config)\r\n\r\n            $(window).on('resize.ekkoLightbox', () => {\r\n                this._resize(this._wantedWidth, this._wantedHeight)\r\n            })\r\n            this._$lightboxContainer\r\n                .on('touchstart', () => {\r\n                    this._touchstartX = event.changedTouches[0].screenX;\r\n\r\n                })\r\n                .on('touchend', () => {\r\n                    this._touchendX = event.changedTouches[0].screenX;\r\n                    this._swipeGesure();\r\n                })\r\n        }\r\n\r\n        element() {\r\n            return this._$element;\r\n        }\r\n\r\n        modal() {\r\n            return this._$modal;\r\n        }\r\n\r\n        navigateTo(index) {\r\n\r\n            if (index < 0 || index > this._$galleryItems.length - 1)\r\n                return this\r\n\r\n            this._galleryIndex = index\r\n\r\n            this.updateNavigation()\r\n\r\n            this._$element = $(this._$galleryItems.get(this._galleryIndex))\r\n            this._handle();\r\n        }\r\n\r\n        navigateLeft() {\r\n\r\n            if (!this._$galleryItems)\r\n                return;\r\n\r\n            if (this._$galleryItems.length === 1)\r\n                return\r\n\r\n            if (this._galleryIndex === 0) {\r\n                if (this._config.wrapping)\r\n                    this._galleryIndex = this._$galleryItems.length - 1\r\n                else\r\n                    return\r\n            }\r\n            else //circular\r\n                this._galleryIndex--\r\n\r\n            this._config.onNavigate.call(this, 'left', this._galleryIndex)\r\n            return this.navigateTo(this._galleryIndex)\r\n        }\r\n\r\n        navigateRight() {\r\n\r\n            if (!this._$galleryItems)\r\n                return;\r\n\r\n            if (this._$galleryItems.length === 1)\r\n                return\r\n\r\n            if (this._galleryIndex === this._$galleryItems.length - 1) {\r\n                if (this._config.wrapping)\r\n                    this._galleryIndex = 0\r\n                else\r\n                    return\r\n            }\r\n            else //circular\r\n                this._galleryIndex++\r\n\r\n            this._config.onNavigate.call(this, 'right', this._galleryIndex)\r\n            return this.navigateTo(this._galleryIndex)\r\n        }\r\n\r\n        updateNavigation() {\r\n            if (!this._config.wrapping) {\r\n                let $nav = this._$lightboxContainer.find('div.ekko-lightbox-nav-overlay')\r\n                if (this._galleryIndex === 0)\r\n                    $nav.find('a:first-child').addClass('disabled')\r\n                else\r\n                    $nav.find('a:first-child').removeClass('disabled')\r\n\r\n                if (this._galleryIndex === this._$galleryItems.length - 1)\r\n                    $nav.find('a:last-child').addClass('disabled')\r\n                else\r\n                    $nav.find('a:last-child').removeClass('disabled')\r\n            }\r\n        }\r\n\r\n        close() {\r\n            return this._$modal.modal('hide');\r\n        }\r\n\r\n        // helper private methods\r\n        _navigationalBinder(event) {\r\n            event = event || window.event;\r\n            if (event.keyCode === 39)\r\n                return this.navigateRight()\r\n            if (event.keyCode === 37)\r\n                return this.navigateLeft()\r\n        }\r\n\r\n        // type detection private methods\r\n        _detectRemoteType(src, type) {\r\n\r\n            type = type || false;\r\n\r\n            if (!type && this._isImage(src))\r\n                type = 'image';\r\n            if (!type && this._getYoutubeId(src))\r\n                type = 'youtube';\r\n            if (!type && this._getVimeoId(src))\r\n                type = 'vimeo';\r\n            if (!type && this._getInstagramId(src))\r\n                type = 'instagram';\r\n            if (type == 'audio' || type == 'video' || (!type && this._isMedia(src)))\r\n                type = 'media';\r\n            if (!type || ['image', 'youtube', 'vimeo', 'instagram', 'media', 'url'].indexOf(type) < 0)\r\n                type = 'url';\r\n\r\n            return type;\r\n        }\r\n\r\n        _getRemoteContentType(src) {\r\n            let response = $.ajax({\r\n                type: 'HEAD',\r\n                url: src,\r\n                async: false\r\n            });\r\n            let contentType = response.getResponseHeader('Content-Type')\r\n            return contentType;\r\n        }\r\n\r\n        _isImage(string) {\r\n            return string && string.match(/(^data:image\\/.*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\\?|#).*)?$)/i)\r\n        }\r\n\r\n        _isMedia(string) {\r\n            return string && string.match(/(\\.(mp3|mp4|ogg|webm|wav)((\\?|#).*)?$)/i)\r\n        }\r\n\r\n        _containerToUse() {\r\n            // if currently showing an image, fade it out and remove\r\n            let $toUse = this._$lightboxBodyTwo\r\n            let $current = this._$lightboxBodyOne\r\n\r\n            if (this._$lightboxBodyTwo.hasClass('in')) {\r\n                $toUse = this._$lightboxBodyOne\r\n                $current = this._$lightboxBodyTwo\r\n            }\r\n\r\n            $current.removeClass('in show')\r\n            setTimeout(() => {\r\n                if (!this._$lightboxBodyTwo.hasClass('in'))\r\n                    this._$lightboxBodyTwo.empty()\r\n                if (!this._$lightboxBodyOne.hasClass('in'))\r\n                    this._$lightboxBodyOne.empty()\r\n            }, 500)\r\n\r\n            $toUse.addClass('in show')\r\n            return $toUse\r\n        }\r\n\r\n        _handle() {\r\n\r\n            // ### Added by DhyMik in v.5.5.0-dhymik:\r\n\r\n            // remove css added in '_preloadImage'\r\n            this._$modalDialog.removeClass(\"imageLoading\");\r\n            this._$modalDialog.removeClass(\"imageLoaded\");\r\n            this._$modalDialog.removeClass(\"imageStretched\");\r\n            this._$modalDialog.removeClass(\"isVideo\");\r\n\r\n            // ### End added by DhyMik in v.5.5.0-dhymik:\r\n\r\n            let $toUse = this._containerToUse()\r\n            this._updateTitleAndFooter()\r\n\r\n            let currentRemote = this._$element.attr('data-remote') || this._$element.attr('href')\r\n            let currentType = this._detectRemoteType(currentRemote, this._$element.attr('data-type') || false)\r\n\r\n            if (['image', 'youtube', 'vimeo', 'instagram', 'media', 'url'].indexOf(currentType) < 0)\r\n                return this._error(this._config.strings.type)\r\n\r\n            switch (currentType) {\r\n                case 'image':\r\n                    let altTag = this._$element.attr('data-alt') || '';\r\n                    this._preloadImage(currentRemote, altTag, $toUse)\r\n                    this._preloadImageByIndex(this._galleryIndex, 3)\r\n                    break;\r\n                case 'youtube':\r\n                    this._showYoutubeVideo(currentRemote, $toUse);\r\n                    break;\r\n                case 'vimeo':\r\n                    this._showVimeoVideo(this._getVimeoId(currentRemote), $toUse);\r\n                    break;\r\n                case 'instagram':\r\n                    this._showInstagramVideo(this._getInstagramId(currentRemote), $toUse);\r\n                    break;\r\n                case 'media':\r\n                    this._showHtml5Media(currentRemote, $toUse);\r\n                    break;\r\n                default: // url\r\n                    this._loadRemoteContent(currentRemote, $toUse);\r\n                    break;\r\n            }\r\n\r\n            return this;\r\n        }\r\n\r\n        _getYoutubeId(string) {\r\n            if (!string)\r\n                return false;\r\n            let matches = string.match(/^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=)([^#\\&\\?]*).*/)\r\n            return (matches && matches[2].length === 11) ? matches[2] : false\r\n        }\r\n\r\n        _getVimeoId(string) {\r\n            return string && string.indexOf('vimeo') > 0 ? string : false\r\n        }\r\n\r\n        _getInstagramId(string) {\r\n            return string && string.indexOf('instagram') > 0 ? string : false\r\n        }\r\n\r\n        // layout private methods\r\n        _toggleLoading(show) {\r\n            show = show || false\r\n            if (show) {\r\n                this._$modalDialog.css('display', 'none')\r\n                this._$modal.removeClass('in show')\r\n                $('.modal-backdrop').append(this._config.loadingMessage)\r\n            }\r\n            else {\r\n                this._$modalDialog.css('display', this._config.verticalAlignCenter ? 'flex' : 'block')\r\n                this._$modal.addClass('in show')\r\n                $('.modal-backdrop').find('.ekko-lightbox-loader').remove()\r\n            }\r\n            return this;\r\n        }\r\n\r\n        _calculateScaleFactor(width, height) {\r\n            /* 'calculateScaleFactor' is the size factor to be applied to an image's or video#s dimensions\r\n             * so it will fill the entire screen if browser window is maximized or full-screened.\r\n             * \r\n             * Added in v.5.5.0-dhymik\r\n             * */\r\n            var screenWidth = window.screen.width;      // these are the hardware screen dimensions,\r\n            var screenHeight = window.screen.height;    // not the browser window\r\n\r\n            var videoMaxDimension = Math.max(width, height);\r\n            var screenMaxDimension = Math.max(screenWidth, screenHeight);\r\n\r\n            return screenMaxDimension / videoMaxDimension;\r\n        }\r\n\r\n        _updateTitleAndFooter() {\r\n            let title = this._$element.data('title') || \"\"\r\n            let caption = this._$element.data('footer') || \"\"\r\n\r\n            this._titleIsShown = false\r\n            if (title || this._config.alwaysShowClose) {\r\n                this._titleIsShown = true\r\n                this._$modalHeader.css('display', '').find('.modal-title').html(title || \"&nbsp;\")\r\n            }\r\n            else\r\n                this._$modalHeader.css('display', 'none')\r\n\r\n            this._footerIsShown = false\r\n            if (caption) {\r\n                this._footerIsShown = true\r\n                this._$modalFooter.css('display', '').html(caption)\r\n            }\r\n            else\r\n                this._$modalFooter.css('display', 'none')\r\n\r\n            return this;\r\n        }\r\n\r\n        _showYoutubeVideo(remote, $containerForElement) {\r\n            let id = this._getYoutubeId(remote)\r\n            let query = remote.indexOf('&') > 0 ? remote.substr(remote.indexOf('&')) : ''\r\n            let width = this._$element.data('width') || 560\r\n            let height = this._$element.data('height') || width / (560 / 315)\r\n            return this._showVideoIframe(\r\n                `//www.youtube.com/embed/${id}?badge=0&autoplay=1&html5=1${query}`,\r\n                width,\r\n                height,\r\n                $containerForElement\r\n            );\r\n        }\r\n\r\n        _showVimeoVideo(id, $containerForElement) {\r\n            let width = this._$element.data('width') || 500\r\n            let height = this._$element.data('height') || width / (560 / 315)\r\n            return this._showVideoIframe(id + '?autoplay=1', width, height, $containerForElement)\r\n        }\r\n\r\n        _showInstagramVideo(id, $containerForElement) {\r\n            // instagram load their content into iframe's so this can be put straight into the element\r\n            let width = this._$element.data('width') || 612\r\n            let height = width + 80;\r\n            id = id.substr(-1) !== '/' ? id + '/' : id; // ensure id has trailing slash\r\n            $containerForElement.html(`<iframe width=\"${width}\" height=\"${height}\" src=\"${id}embed/\" frameborder=\"0\" allowfullscreen></iframe>`);\r\n            this._resize(width, height);\r\n            this._config.onContentLoaded.call(this);\r\n            if (this._$modalArrows && this._config.hideArrowsOnVideo) //hide the arrows when showing video\r\n                this._$modalArrows.css('display', 'none');\r\n            this._$modalDialog.addClass(\"isVideo\");\r\n            this._toggleLoading(false);\r\n            return this;\r\n        }\r\n\r\n        _showVideoIframe(url, width, height, $containerForElement) { // should be used for videos only. for remote content use loadRemoteContent (data-type=url)\r\n            height = height || width; // default to square\r\n\r\n            // Added in v.5.5.0-dhymik:\r\n            var scalingFactor = this._calculateScaleFactor(width, height);\r\n            width = width * scalingFactor;\r\n            height = height * scalingFactor;\r\n            // added end.\r\n\r\n            $containerForElement.html(`<div class=\"embed-responsive embed-responsive-16by9\"><iframe width=\"${width}\" height=\"${height}\" src=\"${url}\" frameborder=\"0\" allowfullscreen class=\"embed-responsive-item\"></iframe></div>`);\r\n            this._resize(width, height);\r\n            this._config.onContentLoaded.call(this);\r\n            if (this._$modalArrows && this._config.hideArrowsOnVideo)\r\n                this._$modalArrows.css('display', 'none'); //hide the arrows when showing video\r\n            this._$modalDialog.addClass(\"isVideo\");\r\n            this._toggleLoading(false);\r\n            return this;\r\n        }\r\n\r\n        _showHtml5Media(url, $containerForElement) { // should be used for videos only. for remote content use loadRemoteContent (data-type=url)\r\n            let contentType = this._getRemoteContentType(url);\r\n            if (!contentType) {\r\n                return this._error(this._config.strings.type)\r\n            }\r\n            let mediaType = '';\r\n            if (contentType.indexOf('audio') > 0) {\r\n                mediaType = 'audio';\r\n            } else {\r\n                mediaType = 'video';\r\n            }\r\n            let width = this._$element.data('width') || 560\r\n            let height = this._$element.data('height') || width / (560 / 315)\r\n\r\n            // ### Added by DhyMik in v.5.5.0-dhymik:\r\n            var scalingFactor = this._calculateScaleFactor(width, height);\r\n            width = width * scalingFactor;\r\n            height = height * scalingFactor;\r\n            // ### added end.\r\n\r\n            $containerForElement.html(`<div class=\"embed-responsive embed-responsive-16by9\"><${mediaType} width=\"${width}\" height=\"${height}\" preload=\"auto\" autoplay controls class=\"embed-responsive-item\"><source src=\"${url}\" type=\"${contentType}\">${this._config.strings.type}</${mediaType}></div>`);\r\n            this._resize(width, height);\r\n            this._config.onContentLoaded.call(this);\r\n            if (this._$modalArrows && this._config.hideArrowsOnVideo)\r\n                this._$modalArrows.css('display', 'none'); //hide the arrows when showing video\r\n            this._$modalDialog.addClass(\"isVideo\");\r\n            this._toggleLoading(false);\r\n            return this;\r\n        }\r\n\r\n        _loadRemoteContent(url, $containerForElement) {\r\n            let width = this._$element.data('width') || 560;\r\n            let height = this._$element.data('height') || 560;\r\n\r\n            let disableExternalCheck = this._$element.data('disableExternalCheck') || false;\r\n            this._toggleLoading(false);\r\n\r\n            // ### Added by DhyMik in v.5.5.0-dhymik:\r\n            var scalingFactor = this._calculateScaleFactor(width, height);\r\n            width = width * scalingFactor;\r\n            height = height * scalingFactor;\r\n            // ### added end.\r\n\r\n            // external urls are loading into an iframe\r\n            // local ajax can be loaded into the container itself\r\n            if (!disableExternalCheck && !this._isExternal(url)) {\r\n                $containerForElement.load(url, $.proxy(() => {\r\n                    return this._$element.trigger('loaded.bs.modal');\r\n                }));\r\n\r\n            } else {\r\n                $containerForElement.html(`<iframe src=\"${url}\" frameborder=\"0\" allowfullscreen></iframe>`);\r\n                this._config.onContentLoaded.call(this);\r\n            }\r\n\r\n            if (this._$modalArrows) //hide the arrows when remote content\r\n                this._$modalArrows.css('display', 'none')\r\n            this._$modalDialog.addClass(\"isVideo\");\r\n\r\n            this._resize(width, height);\r\n            return this;\r\n        }\r\n\r\n        _isExternal(url) {\r\n            let match = url.match(/^([^:\\/?#]+:)?(?:\\/\\/([^\\/?#]*))?([^?#]+)?(\\?[^#]*)?(#.*)?/);\r\n            if (typeof match[1] === \"string\" && match[1].length > 0 && match[1].toLowerCase() !== location.protocol)\r\n                return true;\r\n\r\n            if (typeof match[2] === \"string\" && match[2].length > 0 && match[2].replace(new RegExp(`:(${{\r\n                \"http:\": 80,\r\n                \"https:\": 443\r\n            }[location.protocol]})?$`), \"\") !== location.host)\r\n                return true;\r\n\r\n            return false;\r\n        }\r\n\r\n        _error(message) {\r\n            console.error(message);\r\n            this._containerToUse().html(message);\r\n            this._resize(300, 300);\r\n            return this;\r\n        }\r\n\r\n        _preloadImageByIndex(startIndex, numberOfTimes) {\r\n\r\n            if (!this._$galleryItems)\r\n                return;\r\n\r\n            let next = $(this._$galleryItems.get(startIndex), false)\r\n            if (typeof next == 'undefined')\r\n                return\r\n\r\n            let src = next.attr('data-remote') || next.attr('href')\r\n            if (next.attr('data-type') === 'image' || this._isImage(src))\r\n                this._preloadImage(src, '', false)\r\n\r\n            if (numberOfTimes > 0)\r\n                return this._preloadImageByIndex(startIndex + 1, numberOfTimes - 1);\r\n        }\r\n\r\n        _preloadImage(src, altTag, $containerForImage) {\r\n\r\n            $containerForImage = $containerForImage || false\r\n\r\n            let img = new Image();\r\n            let loadingTimeout = null;\r\n            if ($containerForImage) {\r\n                // if loading takes > 200ms show a loader\r\n                loadingTimeout = setTimeout(() => {\r\n                    $containerForImage.append(this._config.loadingMessage)\r\n                }, 200);\r\n            }\r\n\r\n            img.onload = () => {\r\n                if (loadingTimeout)\r\n                    clearTimeout(loadingTimeout)\r\n                loadingTimeout = null;\r\n                let image = $('<img />');\r\n                image.attr('src', img.src);\r\n                image.attr('alt', altTag);\r\n                image.addClass('img-fluid');\r\n\r\n                // backward compatibility for bootstrap v3\r\n                image.css('width', '100% !important');\r\n\r\n                if ($containerForImage) {\r\n\r\n                    $containerForImage.html(image);\r\n\r\n                    if (this._$modalArrows)\r\n                        this._$modalArrows.css('display', '') // remove display to default to css property\r\n\r\n                    /* ***** determine image dimensions ****\r\n                     * \r\n                     * If image dimensions can be determined \r\n                     * - a max-width inline style is added to .modal-dialog element\r\n                     * - a height inline style is added to .ekko-lightbox-container element\r\n                     * inside of _resize() function.\r\n                     * \r\n                     * In this case, a black backddrop is used behind images to prevent\r\n                     * background bleed during image transitions\r\n                     * \r\n                     * If image dimensions cannot be determined, images are stretched\r\n                     * to maximum dimensions by maximizing all parent containers.\r\n                     * In this case\r\n                     * - 'imageStretched' css class is added to .modal-dialog element\r\n                     * - black backdrop is not being used, to prevent backdrop from\r\n                     *   extending over entire screen regardless of image size.\r\n                     * */\r\n\r\n                    this._$modalDialog.css('display', this._config.verticalAlignCenter ? 'flex' : 'block');\r\n\r\n                    this._$modalDialog.addClass(\"imageLoading\");\r\n                    // temporarily stretches img parent containers so image dimensions can be determined.\r\n\r\n                    var clientWidth = 0;\r\n                    var clientHeight = 0;\r\n\r\n                    // this works in Firefox etc.:\r\n                    var imageWidth = image[0].width;\r\n                    var imageHeight = image[0].height;\r\n\r\n                    // this works in Chrome etc.:\r\n                    var imgWidth = img.width;\r\n                    var imgHeight = img.height;\r\n\r\n                    if (imageWidth > 0 && imageHeight > 0) {\r\n                        clientWidth = imageWidth;\r\n                        clientHeight = imageHeight;\r\n                    }\r\n                    else if (imgWidth > 0 && imgHeight > 0) {\r\n                        clientWidth = imgWidth;\r\n                        clientHeight = imgHeight;\r\n                    }\r\n\r\n                    this._$modalDialog.removeClass(\"imageLoading\");\r\n                    // remove temporary parent container stretch\r\n\r\n                    if (clientWidth > 0 && clientHeight > 0) {\r\n                        // we found image dimensions\r\n                        if (this._config.debug) alert(\r\n                            \"imageWidth: \" + imageWidth + \", \\\\n\" +\r\n                            \"imageHeight: \" + imageHeight + \", \\\\n\" +\r\n                            \"imgWidth: \" + imgWidth + \", \\\\n\" +\r\n                            \"imgHeight: \" + imgHeight + \".\"\r\n                        );\r\n                        this._resize(clientWidth, clientHeight);\r\n                    }\r\n                    else {\r\n                        // we did not find image dimensions, use stretch method\r\n                        this._$modalDialog.addClass(\"imageStretched\");\r\n                        if (this._config.debug) alert(\"imageStretched\");\r\n                    }\r\n\r\n                    this._$modalDialog.addClass(\"imageLoaded\");\r\n\r\n                    this._toggleLoading(false);\r\n                    return this._config.onContentLoaded.call(this);\r\n                }\r\n            };\r\n\r\n            if ($containerForImage) {\r\n                img.onerror = () => {\r\n                    this._toggleLoading(false);\r\n                    return this._error(this._config.strings.fail + `  ${src}`);\r\n                };\r\n            }\r\n\r\n            img.src = src;\r\n            return img;\r\n        }\r\n\r\n        _swipeGesure() {\r\n            if (this._touchendX < this._touchstartX) {\r\n                return this.navigateRight();\r\n            }\r\n            if (this._touchendX > this._touchstartX) {\r\n                return this.navigateLeft();\r\n            }\r\n        }\r\n\r\n        _resize(width, height) {\r\n\r\n            height = height || width;\r\n\r\n            var scalingFactor = this._calculateScaleFactor(width, height);\r\n            width = width * scalingFactor;\r\n            height = height * scalingFactor;\r\n\r\n            this._wantedWidth = width;\r\n            this._wantedHeight = height;\r\n\r\n            if (this._config.debug) alert(\"wanted width: \" + this._wantedWidth + \", wanted height: \" + this._wantedHeight);\r\n\r\n            let imageAspecRatio = width / height;\r\n\r\n            this._$modalDialog.addClass(\"imageLoading\");\r\n            // temporarily stretches img parent containers so element dimensions can be determined.\r\n\r\n            var modalDialogOuterWidthExcludingMargins = this._$modalDialog.outerWidth(false);\r\n            var modalImageContainerInnerWidth = this._$lightboxContainer.innerWidth();\r\n\r\n            var modalDialogOuterHeightExcludingMargins = this._$modalDialog.outerHeight(false);\r\n            var modalDialogOuterHeightIncludingMargins = this._$modalDialog.outerHeight(true);\r\n            var modalImageContainerInnerHeight = this._$lightboxContainer.innerHeight();\r\n\r\n            this._$modalDialog.removeClass(\"imageLoading\");\r\n\r\n            // the width difference between image container and .modal-dialog element (excluding its margin), which gets the 'max-width' inline style added\r\n            var widthInnerSpacing = modalDialogOuterWidthExcludingMargins - modalImageContainerInnerWidth;\r\n\r\n            // the height difference between .moda-dialog element (excluding its margins) and the image container element, which gets the 'height' inline style added\r\n            var heightInnerSpacing = modalDialogOuterHeightExcludingMargins - modalImageContainerInnerHeight;\r\n            var heightOuterSpacing = modalDialogOuterHeightIncludingMargins - modalImageContainerInnerHeight;\r\n\r\n            let maxWidth = Math.min(modalDialogOuterWidthExcludingMargins, this._config.doc.body.clientWidth, this._config.maxWidth)\r\n\r\n            // if width > the available space, scale down the expected width and height\r\n\r\n            if ((width + widthInnerSpacing) > maxWidth) {\r\n                height = (maxWidth - widthInnerSpacing) / imageAspecRatio;\r\n                width = maxWidth\r\n            } else\r\n                width = (width + widthInnerSpacing)\r\n\r\n            let headerHeight = 0,\r\n                footerHeight = 0\r\n\r\n            // as the resize is performed the modal is show, the calculate might fail\r\n            // if so, default to the default sizes\r\n            if (this._footerIsShown)\r\n                footerHeight = this._$modalFooter.outerHeight(true) || 55\r\n\r\n            if (this._titleIsShown)\r\n                headerHeight = this._$modalHeader.outerHeight(true) || 67\r\n\r\n            let maxHeight = Math.min(height, window.innerHeight - heightOuterSpacing - headerHeight - footerHeight, this._config.maxHeight - heightInnerSpacing - headerHeight - footerHeight);\r\n\r\n            if (height > maxHeight) {\r\n                // if height > the available height, scale down the width\r\n                width = Math.ceil(maxHeight * imageAspecRatio) + widthInnerSpacing;\r\n            }\r\n\r\n            this._$lightboxContainer.css('height', maxHeight)\r\n            this._$modalDialog.css('flex', '1').css('maxWidth', width);\r\n\r\n            if (this._config.debug) {\r\n                var message = \"window width: \" + $(window).width()\r\n                    + \",\\nwindow height: \" + $(window).height()\r\n                    + \",\\nwindow screen width: \" + window.screen.width\r\n                    + \",\\nwindow screen height: \" + window.screen.height\r\n                    + \",\\nwindow inner width: \" + window.innerWidth\r\n                    + \",\\nwindow inner height: \" + window.innerHeight\r\n                    + \",\\n maxheight: \" + maxHeight;\r\n\r\n                this._$modalArrows[0].childNodes[0].innerText = message;\r\n            }\r\n\r\n            let modal = this._$modal.data('bs.modal');\r\n            if (modal) {\r\n                // v4 method is mistakenly protected\r\n                try {\r\n                    modal._handleUpdate();\r\n                } catch (Exception) {\r\n                    modal.handleUpdate();\r\n                }\r\n            }\r\n            return this;\r\n        }\r\n\r\n        static _jQueryInterface(config) {\r\n            config = config || {}\r\n            return this.each(() => {\r\n                let $this = $(this)\r\n                let _config = $.extend(\r\n                    {},\r\n                    Lightbox.Default,\r\n                    $this.data(),\r\n                    typeof config === 'object' && config\r\n                )\r\n\r\n                new Lightbox(this, _config)\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n\r\n    $.fn[NAME] = Lightbox._jQueryInterface\r\n    $.fn[NAME].Constructor = Lightbox\r\n    $.fn[NAME].noConflict = () => {\r\n        $.fn[NAME] = JQUERY_NO_CONFLICT\r\n        return Lightbox._jQueryInterface\r\n    }\r\n\r\n    return Lightbox\r\n\r\n})(jQuery)\r\n\r\nexport default Lightbox\r\n"],"file":"ekko-lightbox.js"}